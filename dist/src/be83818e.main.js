/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/**
 * This Source Code is licensed under the MIT license. If a copy of the
 * MIT-license was not distributed with this file, You can obtain one at:
 * http://opensource.org/licenses/mit-license.html.
 *
 * @author: Hein Rutjes (IjzerenHein)
 * @license MIT
 * @copyright Gloey Apps, 2014 - 2015
 */

/**
 * This Source Code is licensed under the MIT license. If a copy of the
 * MIT-license was not distributed with this file, You can obtain one at:
 * http://opensource.org/licenses/mit-license.html.
 *
 * @author: Hein Rutjes (IjzerenHein)
 * @license MIT
 * @copyright Gloey Apps, 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2015
 */

/**
 * This Source Code is licensed under the MIT license. If a copy of the
 * MIT-license was not distributed with this file, You can obtain one at:
 * http://opensource.org/licenses/mit-license.html.
 *
 * @author: Hein Rutjes (IjzerenHein)
 * @license MIT
 * @copyright Gloey Apps, 2015
 */

!function(){var t,e,i;!function(o){function s(t,e){return S.call(t,e)}function r(t,e){var i,o,s,r,n,a,l,c,h,u,p,d=e&&e.split("/"),f=y.map,_=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),n=t.length-1,y.nodeIdCompat&&w.test(t[n])&&(t[n]=t[n].replace(w,"")),t=d.concat(t),h=0;h<t.length;h+=1)if(p=t[h],"."===p)t.splice(h,1),h-=1;else if(".."===p){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||_)&&f){for(i=t.split("/"),h=i.length;h>0;h-=1){if(o=i.slice(0,h).join("/"),d)for(u=d.length;u>0;u-=1)if(s=f[d.slice(0,u).join("/")],s&&(s=s[o])){r=s,a=h;break}if(r)break;!l&&_&&_[o]&&(l=_[o],c=h)}!r&&l&&(r=l,a=c),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function n(t,e){return function(){return d.apply(o,x.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return r(e,t)}}function l(t){return function(e){g[t]=e}}function c(t){if(s(v,t)){var e=v[t];delete v[t],m[t]=!0,p.apply(o,e)}if(!s(g,t)&&!s(m,t))throw new Error("No "+t);return g[t]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function u(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,d,f,_,g={},v={},y={},m={},S=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;f=function(t,e){var i,o=h(t),s=o[0];return t=o[1],s&&(s=r(s,e),i=c(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):r(t,e):(t=r(t,e),o=h(t),s=o[0],t=o[1],s&&(i=c(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},_={require:function(t){return n(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:u(t)}}},p=function(t,e,i,r){var a,h,u,p,d,y,S=[],x=typeof i;if(r=r||t,"undefined"===x||"function"===x){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(p=f(e[d],r),h=p.f,"require"===h)S[d]=_.require(t);else if("exports"===h)S[d]=_.exports(t),y=!0;else if("module"===h)a=S[d]=_.module(t);else if(s(g,h)||s(v,h)||s(m,h))S[d]=c(h);else{if(!p.p)throw new Error(t+" missing "+h);p.p.load(p.n,n(r,!0),l(h),{}),S[d]=g[h]}u=i?i.apply(g[t],S):void 0,t&&(a&&a.exports!==o&&a.exports!==g[t]?g[t]=a.exports:u===o&&y||(g[t]=u))}else t&&(g[t]=i)},t=e=d=function(t,e,i,s,r){if("string"==typeof t)return _[t]?_[t](e):c(f(t,e).f);if(!t.splice){if(y=t,y.deps&&d(y.deps,y.callback),!e)return;e.splice?(t=e,e=i,i=null):t=o}return e=e||function(){},"function"==typeof i&&(i=s,s=r),s?p(o,t,e,i):setTimeout(function(){p(o,t,e,i)},4),d},d.config=function(t){return d(t)},t._defined=g,i=function(t,e,i){e.splice||(i=e,e=[]),s(g,t)||s(v,t)||(v[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function o(t){return a[t]}function s(t,e){a[t]=e}function r(t){var e=a.length;return s(e,t),e}function n(t){s(t,null)}var a=[];i.exports={register:r,unregister:n,get:o,set:s}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function o(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(o(t))}function r(t){return 0>t?-1:1}var n={};n.precision=1e-6,n.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},n.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},n.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},n.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],o=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return n.thenMove(e,[i,o,s])},n.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},n.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},n.scale=function(t,e,i){return void 0===i&&(i=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},n.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},n.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},n.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},n.rotate=function(t,e,i){var o=Math.cos(t),s=Math.sin(t),r=Math.cos(e),n=Math.sin(e),a=Math.cos(i),l=Math.sin(i),c=[r*a,o*l+s*n*a,s*l-o*n*a,0,-r*l,o*a-s*n*l,s*a+o*n*l,0,n,-s*r,o*r,0,0,0,0,1];return c},n.rotateAxis=function(t,e){var i=Math.sin(e),o=Math.cos(e),s=1-o,r=t[0]*t[0]*s,n=t[0]*t[1]*s,a=t[0]*t[2]*s,l=t[1]*t[1]*s,c=t[1]*t[2]*s,h=t[2]*t[2]*s,u=t[0]*i,p=t[1]*i,d=t[2]*i,f=[r+o,n+d,a-p,0,n-d,l+o,c+u,0,a+p,c-u,h+o,0,0,0,0,1];return f},n.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),o=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return n.thenMove(e,[i,o,s])},n.skew=function(t,e,i){return[1,Math.tan(e),0,0,Math.tan(i),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},n.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},n.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},n.getTranslate=function(t){return[t[12],t[13],t[14]]},n.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],n=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],l=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],h=t[0]*e-t[1]*i+t[2]*o,u=1/h,p=[u*e,-u*s,u*a,0,-u*i,u*r,-u*l,0,u*o,-u*n,u*c,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},n.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},n.interpret=function(t){var e=[t[0],t[1],t[2]],i=r(e[0]),a=s(e),l=[e[0]+i*a,e[1],e[2]],c=2/o(l);if(c>=1/0)return{translate:n.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-c*l[0]*l[0],h[5]=1-c*l[1]*l[1],h[10]=1-c*l[2]*l[2],h[1]=-c*l[0]*l[1],h[2]=-c*l[0]*l[2],h[6]=-c*l[1]*l[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var u=n.multiply(h,t),p=[u[5],u[6]],d=r(p[0]),f=s(p),_=[p[0]+d*f,p[1]],g=2/o(_),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-g*_[0]*_[0],v[10]=1-g*_[1]*_[1],v[6]=-g*_[0]*_[1],v[9]=v[6];var y=n.multiply(v,h),m=n.multiply(y,t),S=n.scale(m[0]<0?-1:1,m[5]<0?-1:1,m[10]<0?-1:1);m=n.multiply(m,S),y=n.multiply(S,y);var x={};return x.translate=n.getTranslate(t),x.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],x.rotate[0]||(x.rotate[0]=0,x.rotate[2]=Math.atan2(y[4],y[5])),x.scale=[m[0],m[5],m[10]],x.skew=[Math.atan2(m[9],x.scale[2]),Math.atan2(m[8],x.scale[2]),Math.atan2(m[4],x.scale[0])],Math.abs(x.rotate[0])+Math.abs(x.rotate[2])>1.5*Math.PI&&(x.rotate[1]=Math.PI-x.rotate[1],x.rotate[1]>Math.PI&&(x.rotate[1]-=2*Math.PI),x.rotate[1]<-Math.PI&&(x.rotate[1]+=2*Math.PI),x.rotate[0]<0?x.rotate[0]+=Math.PI:x.rotate[0]-=Math.PI,x.rotate[2]<0?x.rotate[2]+=Math.PI:x.rotate[2]-=Math.PI),x},n.average=function(t,e,i){i=void 0===i?.5:i;for(var o=n.interpret(t),s=n.interpret(e),r={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)r.translate[a]=(1-i)*o.translate[a]+i*s.translate[a],r.rotate[a]=(1-i)*o.rotate[a]+i*s.rotate[a],r.scale[a]=(1-i)*o.scale[a]+i*s.scale[a],r.skew[a]=(1-i)*o.skew[a]+i*s.skew[a];return n.build(r)},n.build=function(t){var e=n.scale(t.scale[0],t.scale[1],t.scale[2]),i=n.skew(t.skew[0],t.skew[1],t.skew[2]),o=n.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return n.thenMove(n.multiply(n.multiply(o,i),e),t.translate)},n.equals=function(t,e){return!n.notEquals(t,e)},n.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},n.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},n.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],n.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=n}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function o(){this.result={}}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var r=t("./Transform");o._instance=new o,o.parse=function(t,e){return o._instance.parse(t,e)},o.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,r.identity),this.result},o.prototype.reset=function(){this.result={}};var n=[0,0];o.prototype._parseSpec=function(t,e,i){var o,a,l,c,h,u,p;if("number"==typeof t){if(o=t,l=e.transform,u=e.align||n,e.size&&u&&(u[0]||u[1])){var d=[u[0]*e.size[0],u[1]*e.size[1],0];l=r.thenMove(l,s(d,i))}this.result[o]={transform:l,opacity:e.opacity,origin:e.origin||n,align:e.align||n,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var f=0;f<t.length;f++)this._parseSpec(t[f],e,i);else{a=t.target,l=e.transform,c=e.opacity,h=e.origin,u=e.align,p=e.size;var _=i;if(void 0!==t.opacity&&(c=e.opacity*t.opacity),t.transform&&(l=r.multiply(e.transform,t.transform)),t.origin&&(h=t.origin,_=e.transform),t.align&&(u=t.align),t.size||t.proportions){var g=p;p=[p[0],p[1]],t.size&&(void 0!==t.size[0]&&(p[0]=t.size[0]),void 0!==t.size[1]&&(p[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(p[0]=p[0]*t.proportions[0]),void 0!==t.proportions[1]&&(p[1]=p[1]*t.proportions[1])),g&&(u&&(u[0]||u[1])&&(l=r.thenMove(l,s([u[0]*g[0],u[1]*g[1],0],i))),h&&(h[0]||h[1])&&(l=r.moveThen([-h[0]*p[0],-h[1]*p[1],0],l))),_=e.transform,h=null,u=null}this._parseSpec(a,{transform:l,opacity:c,origin:h,align:u,size:p},_)}}},i.exports=o}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function o(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,e,i){for(var o=n.parse(t,e),a=Object.keys(o),l=0;l<a.length;l++){var c=a[l],h=r.get(c),u=o[c];u.allocator=e.allocator;var p=h.commit(u);p?s(p,e,i):i[c]=u}}var r=t("./Entity"),n=t("./SpecParser");o.prototype.add=function(t){var e=t instanceof o?t:new o(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},o.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},o.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof o?t:this},o.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},o.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var o=e[i];if(void 0===this._resultCache[o]){var n=r.get(o);n.cleanup&&n.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},o.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=o}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function o(){this.listeners={},this._owner=this}o.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var o=0;o<i.length;o++)i[o].call(this._owner,e);return this},o.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(t,e){var i=this.listeners[t];if(void 0!==i){var o=i.indexOf(e);o>=0&&i.splice(o,1)}return this},o.prototype.bindThis=function(t){this._owner=t},i.exports=o}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function o(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},o.setOutputHandler=function(t,e){e instanceof o&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},o.prototype.emit=function(t,e){s.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},o.prototype.trigger=o.prototype.emit,o.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},o.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},o.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},o.prototype.addListener=o.prototype.on,o.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},o.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=o}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function o(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}o.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.firstChild);this.container=t}},o.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},o.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},o.prototype.getNodeCount=function(){return this.nodeCount},i.exports=o}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var o={};o.Direction={X:0,Y:1,Z:2},o.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},o.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},o.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},o.clone=function(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t)if("object"==typeof t[i]&&null!==t[i])if(t[i]instanceof Array){e[i]=new Array(t[i].length);for(var s=0;s<t[i].length;s++)e[i][s]=o.clone(t[i][s])}else e[i]=o.clone(t[i]);else e[i]=t[i]}else e=t;return e},i.exports=o}),i("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(t,e,i){function o(t){this.method=t,this._instances=[],this.state=[]}var s=t("../utilities/Utility");o.SUPPORTS_MULTIPLE=!0,o.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},o.prototype.set=function(t,e,i){for(var o=s.after(t.length,i),r=0;r<t.length;r++)this._instances[r]||(this._instances[r]=new this.method),this._instances[r].set(t[r],e,o)},o.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=o}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function r(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function n(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=o.getCurve(i.curve)),i}function a(t,e,i,o,s){var r,n=1e-7,a=(i(s)-i(s-n))/n;if(t instanceof Array){r=[];for(var l=0;l<t.length;l++)r[l]="number"==typeof t[l]?a*(t[l]-e[l])/o:0}else r=a*(t-e)/o;return r}function l(t,e,i){var o;if(t instanceof Array){o=[];for(var r=0;r<t.length;r++)o[r]="number"==typeof t[r]?s(t[r],e[r],i):t[r]}else o=s(t,e,i);return o}o.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},o.SUPPORTS_MULTIPLE=!0,o.DEFAULT_OPTIONS={curve:o.Curves.linear,duration:500,speed:0};var c={};o.registerCurve=function(t,e){return c[t]?!1:(c[t]=e,!0)},o.unregisterCurve=function(t){return c[t]?(delete c[t],!0):!1},o.getCurve=function(t){var e=c[t];if(void 0!==e)return e;throw new Error("curve not registered")},o.getCurves=function(){return c},o.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=r(this.get()),e=n(e,this.options),e.speed){var o=this._startValue;if(o instanceof Object){var s=0;for(var a in o)s+=(t[a]-o[a])*(t[a]-o[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-o)/e.speed}this._startTime=Date.now(),this._endValue=r(t),this._startVelocity=r(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},o.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=r(t),this.velocity=r(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},o.prototype.getVelocity=function(){return this.velocity},o.prototype.get=function(t){return this.update(t),this.state},o.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=l(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var o=this._callback;this._callback=void 0,o()}},o.prototype.isActive=function(){return this._active},o.prototype.halt=function(){this.reset(this.get())},o.registerCurve("linear",o.Curves.linear),o.registerCurve("easeIn",o.Curves.easeIn),o.registerCurve("easeOut",o.Curves.easeOut),o.registerCurve("easeInOut",o.Curves.easeInOut),o.registerCurve("easeOutBounce",o.Curves.easeOutBounce),o.registerCurve("spring",o.Curves.spring),o.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=o}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function o(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],o=this.currentAction[1];o instanceof Object&&o.method?(e=o.method,"string"==typeof e&&(e=a[e])):e=n,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new r(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(o.velocity=this.velocity),this._engineInstance.set(i,o,s.bind(this))}var r=t("./MultipleTransition"),n=t("./TweenTransition"),a={};o.register=function(t){var e=!0;for(var i in t)o.registerMethod(i,t[i])||(e=!1);return e},o.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},o.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},o.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var o=[t,e];return this.actionQueue.push(o),this.callbackQueue.push(i),this.currentAction||s.call(this),this},o.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},o.prototype.delay=function(t,e){var i;return i=this.actionQueue.length?this.actionQueue[this.actionQueue.length-1][0]:this.currentAction?this.currentAction[0]:this.get(),this.set(i,{duration:t,curve:function(){return 0}},e)},o.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},o.prototype.isActive=function(){return!!this.currentAction},o.prototype.halt=function(){return this.set(this.get())},i.exports=o}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(t,e,i){function o(){var t=this.container;return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new r,this._eventOutput=new n,this._size=o.call(this),this._perspectiveState=new c(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:l.identity,opacity:1,origin:h,align:h,size:this._size},this._eventOutput.on("resize",function(){this.setSize(o.call(this))}.bind(this))}var r=t("./RenderNode"),n=t("./EventHandler"),a=t("./ElementAllocator"),l=t("./Transform"),c=t("../transitions/Transitionable"),h=[0,0],u=!("perspective"in document.documentElement.style),p=u?function(t,e){t.style.webkitPerspective=e?e.toFixed()+"px":""}:function(t,e){t.style.perspective=e?e.toFixed()+"px":""};s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=o.call(this)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(p(this.container,e),this._perspective=e),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},s.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},s.prototype.on=function(t,e){return this._eventOutput.on(t,e)},s.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=s}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function o(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new r,this.eventOutput.bindThis(this),r.setOutputHandler(this,this.eventOutput)}var r=t("./EventHandler");o.patch=function(t){for(var e=new o(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},o.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var o in i)o in t&&i[o]&&i[o].constructor===Object&&t[o]&&t[o].constructor===Object?(t.hasOwnProperty(o)||(t[o]=Object.create(t[o])),this.key(o).patch(i[o]),this.eventOutput&&this.eventOutput.emit("change",{id:o,value:this.key(o).value()})):this.set(o,i[o])}return this},o.prototype.setOptions=o.prototype.patch,o.prototype.key=function(t){var e=new o(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},o.prototype.get=function(t){return t?this._value[t]:this._value},o.prototype.getOptions=o.prototype.get,o.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function o(){z.runLoop?(f.step(),window.requestAnimationFrame(o)):x=!1}function s(){for(var t=0;t<_.length;t++)_[t].emit("resize");b.emit("resize")}function r(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),n()}function n(){return document.body?(document.body.classList.add("famous-root"),void document.documentElement.classList.add("famous-root")):void f.nextTick(n)}function a(t,e){return document.body?void document.body.addEventListener(t,e):void f.nextTick(addEventListener.bind(this,t,e))}function l(t,e){return document.body?(document.body.appendChild(e),void t.emit("resize")):void f.nextTick(l.bind(this,t,e))}var c,h,u=t("./Context"),p=t("./EventHandler"),d=t("./OptionsManager"),f={},_=[],g=[],v=0,y=0,m=[],S=Date.now(),x=!0,w={},b=new p,z={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},O=new d(z),T=10;f.step=function(){v++,y=v;var t=Date.now();if(!(h&&h>t-S)){var e=0;c=t-S,S=t,b.emit("prerender");for(var i=g.length;i--;)g.shift()(v);for(;m.length&&Date.now()-t<T;)m.shift().call(this);for(e=0;e<_.length;e++)_[e].update();b.emit("postrender")}},window.requestAnimationFrame(o),window.addEventListener("resize",s,!1),s();var M=!1;f.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(f):b.pipe(t)},f.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(f):b.unpipe(t)},f.on=function(t,e){return t in w||(w[t]=b.emit.bind(b,t),a(t,w[t])),b.on(t,e)},f.emit=function(t,e){return b.emit(t,e)},f.removeListener=function(t,e){return b.removeListener(t,e)},f.getFPS=function(){return 1e3/c},f.setFPSCap=function(t){h=Math.floor(1e3/t)},f.getOptions=function(t){return O.getOptions(t)},f.setOptions=function(){return O.setOptions.apply(O,arguments)},f.createContext=function(t){!M&&z.appMode&&f.nextTick(r);var e=!1;t||(t=document.createElement(z.containerType),t.classList.add(z.containerClass),e=!0);var i=new u(t);return f.registerContext(i),e&&l(i,t),i},f.registerContext=function(t){return _.push(t),t},f.getContexts=function(){return _},f.deregisterContext=function(t){var e=_.indexOf(t);e>=0&&_.splice(e,1)},f.nextTick=function(t){g.push(t)},f.defer=function(t){m.push(t)},O.on("change",function(t){"fpsCap"===t.id?f.setFPSCap(t.value):"runLoop"===t.id&&!x&&t.value&&(x=!0,window.requestAnimationFrame(o))}),i.exports=f}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","../core/Transform","../utilities/Utility"],function(t,e,i){function o(t){this._final=a.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new n(this._finalTranslate),this.rotate=new n(this._finalRotate),this.skew=new n(this._finalSkew),this.scale=new n(this._finalScale),t&&this.set(t)}function s(){return a.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function r(){return a.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var n=t("./Transitionable"),a=t("../core/Transform"),l=t("../utilities/Utility");o.prototype.setTranslate=function(t,e,i){return this._finalTranslate=t,this._final=r.call(this),this.translate.set(t,e,i),this},o.prototype.setScale=function(t,e,i){return this._finalScale=t,this._final=r.call(this),this.scale.set(t,e,i),this},o.prototype.setRotate=function(t,e,i){return this._finalRotate=t,this._final=r.call(this),this.rotate.set(t,e,i),this},o.prototype.setSkew=function(t,e,i){return this._finalSkew=t,this._final=r.call(this),this.skew.set(t,e,i),this},o.prototype.set=function(t,e,i){var o=a.interpret(t);this._finalTranslate=o.translate,this._finalRotate=o.rotate,this._finalSkew=o.skew,this._finalScale=o.scale,this._final=t;var s=i?l.after(4,i):null;return this.translate.set(o.translate,e,s),this.rotate.set(o.rotate,e,s),this.skew.set(o.skew,e,s),this.scale.set(o.scale,e,s),this},o.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)
},o.prototype.get=function(){return this.isActive()?s.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},o.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},i.exports=o}),i("famous/core/Modifier",["require","exports","module","./Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function o(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:r.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var r=t("./Transform"),n=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");o.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},o.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},o.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},o.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},o.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},o.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},o.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},o.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new n(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},o.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new n(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},o.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new n(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},o.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new n(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},o.prototype.setProportions=function(t,e,i){return t&&(e||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new n(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,e,i),this):this.proportionsFrom(t)},o.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},o.prototype.getTransform=function(){return this._transformGetter()},o.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},o.prototype.getOpacity=function(){return this._opacityGetter()},o.prototype.getOrigin=function(){return this._originGetter()},o.prototype.getAlign=function(){return this._alignGetter()},o.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},o.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},o.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},i.exports=o}),i("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function o(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new h,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=c.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function s(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}function r(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}function n(t){t[12]=Math.round(t[12]*d)/d,t[13]=Math.round(t[13]*d)/d;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function l(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var c=t("./Entity"),h=t("./EventHandler"),u=t("./Transform"),p=!("transform"in document.documentElement.style),d=window.devicePixelRatio||1;o.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},o.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},o.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this._eventOutput.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},o.prototype.pipe=function(t){return this._eventOutput.pipe(t)},o.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},o.prototype.render=function(){return this.id};var f;f=p?function(t,e){t.style.webkitTransform=n(e)}:function(t,e){t.style.transform=n(e)};var _=p?function(t,e){t.style.webkitTransformOrigin=a(e)}:function(t,e){t.style.transformOrigin=a(e)},g=p?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};o.prototype.commit=function(t){var e=this._element;if(e){{var i=t.transform,o=t.opacity,s=t.origin;t.size}if(!i&&this._matrix)return this._matrix=null,this._opacity=0,void g(e);if(l(this._origin,s)&&(this._originDirty=!0),u.notEquals(this._matrix,i)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==o&&(this._opacity=o,e.style.opacity=o>=1?"0.999999":o),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(s?(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1]):this._origin=null,_(e,this._origin),this._originDirty=!1),i||(i=u.identity),this._matrix=i;var r=this._size?u.thenMove(i,[-this._size[0]*s[0],-this._size[1]*s[1],0]):i;f(e,r),this._transformDirty=!1}}},o.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},o.prototype.attach=function(t){this._element=t,s.call(this,t)},o.prototype.detach=function(){var t=this._element;return t&&(r.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=o}),i("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,e,i){function o(t){h.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function s(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function r(t){for(var e in this.properties)t.style[e]=this.properties[e]}function n(t){for(var e in this.properties)t.style[e]=""}function a(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])}function l(t){for(var e in this.attributes)t.removeAttribute(e)}function c(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var h=t("./ElementOutput");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.setAttributes=function(t){for(var e in t){if("style"===e)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[e]=t[e]}this._attributesDirty=!0},o.prototype.getAttributes=function(){return this.attributes},o.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,this},o.prototype.getProperties=function(){return this.properties},o.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},o.prototype.removeClass=function(t){var e=this.classList.indexOf(t);return e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0),this},o.prototype.toggleClass=function(t){var e=this.classList.indexOf(t);return e>=0?this.removeClass(t):this.addClass(t),this},o.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e]);return this},o.prototype.getClassList=function(){return this.classList},o.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},o.prototype.getContent=function(){return this.content},o.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},o.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._opacity=null,this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},o.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e=this._currentTarget,i=t.size;if(this._classesDirty){s.call(this,e);for(var o=this.getClassList(),n=0;n<o.length;n++)e.classList.add(o[n]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(r.call(this,e),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(a.call(this,e),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var l=t.size;if(i=[this.size[0],this.size[1]],void 0===i[0]&&(i[0]=l[0]),void 0===i[1]&&(i[1]=l[1]),i[0]===!0||i[1]===!0){if(i[0]===!0)if(this._trueSizeCheck||0===this._size[0]){var u=e.offsetWidth;this._size&&this._size[0]!==u&&(this._size[0]=u,this._sizeDirty=!0),i[0]=u}else this._size&&(i[0]=this._size[0]);if(i[1]===!0)if(this._trueSizeCheck||0===this._size[1]){var p=e.offsetHeight;this._size&&this._size[1]!==p&&(this._size[1]=p,this._sizeDirty=!0),i[1]=p}else this._size&&(i[1]=this._size[1]);this._trueSizeCheck=!1}}c(this._size,i)&&(this._size||(this._size=[0,0]),this._size[0]=i[0],this._size[1]=i[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(e),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),h.prototype.commit.call(this,t)},o.prototype.cleanup=function(t){var e=0,i=this._currentTarget;this._eventOutput.emit("recall"),this.recall(i),i.style.display="none",i.style.opacity="",i.style.width="",i.style.height="",n.call(this,i),l.call(this,i);var o=this.getClassList();for(s.call(this,i),e=0;e<o.length;e++)i.classList.remove(o[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);this.detach(i),this._currentTarget=null,t.deallocate(i)},o.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},o.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},o.prototype.getSize=function(){return this._size?this._size:this.size},o.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},i.exports=o}),i("famous/surfaces/ImageSurface",["require","exports","module","../core/Surface"],function(t,e,i){function o(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("../core/Surface"),r=[],n=[],a=[],l=!0;o.enableCache=function(){l=!0},o.disableCache=function(){l=!1},o.clearCache=function(){r=[],n=[],a=[]},o.getCache=function(){return{urlCache:r,countCache:n,nodeCache:a}},o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="img",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(t){var e=r.indexOf(this._imageUrl);-1!==e&&(1===n[e]?(r.splice(e,1),n.splice(e,1),a.splice(e,1)):n[e]--),e=r.indexOf(t),-1===e?(r.push(t),n.push(1)):n[e]++,this._imageUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){var e=r.indexOf(this._imageUrl);if(void 0===a[e]&&l){var i=new Image;i.src=this._imageUrl||"",a[e]=i}t.src=this._imageUrl||""},o.prototype.recall=function(t){t.src=""},i.exports=o}),i("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","../utilities/Utility"],function(t,e,i){function o(t){this._node=new n,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||o.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),r=t("./OptionsManager"),n=t("./RenderNode"),a=t("../utilities/Utility");o.DEFAULT_OPTIONS={},o.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.add=function(){return this._node.add.apply(this._node,arguments)},o.prototype._add=o.prototype.add,o.prototype.render=function(){return this._node.render()},o.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=o}),i("famous/views/RenderController",["require","exports","module","../core/Modifier","../core/RenderNode","../core/Transform","../transitions/Transitionable","../core/View"],function(t,e,i){function o(){c.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=o.DefaultMap.transform,this.inOpacityMap=o.DefaultMap.opacity,this.inOriginMap=o.DefaultMap.origin,this.inAlignMap=o.DefaultMap.align,this.outTransformMap=o.DefaultMap.transform,this.outOpacityMap=o.DefaultMap.opacity,this.outOriginMap=o.DefaultMap.origin,this.outAlignMap=o.DefaultMap.align,this._output=[]}function s(t,e){return t(e.get())}var r=t("../core/Modifier"),n=t("../core/RenderNode"),a=t("../core/Transform"),l=t("../transitions/Transitionable"),c=t("../core/View");o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},o.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null,align:null},o.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},o.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},o.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},o.prototype.inAlignFrom=function(t){if(t instanceof Function)this.inAlignMap=t;else{if(!t||!t.get)throw new Error("inAlignFrom takes only function or getter object");this.inAlignMap=t.get.bind(t)}return this},o.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},o.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},o.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},o.prototype.outAlignFrom=function(t){if(t instanceof Function)this.outAlignMap=t;else{if(!t||!t.get)throw new Error("outAlignFrom takes only function or getter object");this.outAlignMap=t.get.bind(t)}return this},o.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide()}var o=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,o=this._states[a],o.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{o=new l(0);var h=new r({transform:this.inTransformMap?s.bind(this,this.inTransformMap,o):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,o):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,o):null,align:this.inAlignMap?s.bind(this,this.inAlignMap,o):null}),u=new n;u.add(h).add(t),this._showing=this._nodes.length,this._nodes.push(u),this._modifiers.push(h),this._states.push(o),this._renderables.push(t)}e||(e=this.options.inTransition),o.set(1,e,i)},o.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var o=this._nodes[i],r=this._modifiers[i],n=this._states[i],a=this._renderables[i];r.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,n):null),r.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,n):null),r.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,n):null),r.alignFrom(this.outAlignMap?s.bind(this,this.outAlignMap,n):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),n.halt(),n.set(0,t,function(t,i,o,s){if(this._outgoingRenderables.indexOf(s)>=0){var r=this._nodes.indexOf(t);this._nodes.splice(r,1),this._modifiers.splice(r,1),this._states.splice(r,1),this._renderables.splice(r,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=r&&this._showing--}e&&e.call(this)}.bind(this,o,r,n,a))}},o.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=o}),i("famous/utilities/Timer",["require","exports","module","../core/Engine"],function(t,e,i){function o(t){return h.on(u,t),t}function s(t,e){var i=p(),s=function(){var o=p();o-i>=e&&(t.apply(this,arguments),h.removeListener(u,s))};return o(s)}function r(t,e){var i=p(),s=function(){var o=p();o-i>=e&&(t.apply(this,arguments),i=p())};return o(s)}function n(t,e){if(void 0===e)return void 0;var i=function(){e--,0>=e&&(t.apply(this,arguments),l(i))};return o(i)}function a(t,e){e=e||1;var i=e,s=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return o(s)}function l(t){h.removeListener(u,t)}function c(t,e){var i,o,r,n,a;return function(){o=this,a=arguments,r=p();var c=function(){var l=p-r;e>l?i=s(c,e-l):(i=null,n=t.apply(o,a))};return l(i),i=s(c,e),n}}var h=t("../core/Engine"),u="prerender",p=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:s,setInterval:r,debounce:c,after:n,every:a,clear:l}}),i("famous/transitions/Easing",["require","exports","module"],function(t,e,i){var o={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},outElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:1===t?1:(i||(i=.3),e=i/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},inOutElastic:function(t){var e=1.70158,i=0,o=1;return 0===t?0:2===(t/=.5)?1:(i||(i=.3*1.5),e=i/(2*Math.PI)*Math.asin(1/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-o.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*o.inBounce(2*t):.5*o.outBounce(2*t-1)+.5}};i.exports=o}),i("famous-bkimagesurface",["require","exports","module","famous/core/Surface"],function(t,e,i){"use strict";function o(t){s.apply(this,arguments),this.content=void 0,this._imageUrl=t?t.content:void 0,this._sizeMode=t&&t.sizeMode?t.sizeMode:r.FILL,this._positionMode=t&&t.positionMode?t.positionMode:n.CENTER,this._repeatMode=t&&t.repeatMode?t.repeatMode:a.NONE,this._updateProperties()}var s=t("famous/core/Surface"),r={AUTO:"auto",FILL:"100% 100%",ASPECTFILL:"cover",ASPECTFIT:"contain"},n={CENTER:"center center",LEFT:"left center",RIGHT:"right center",TOP:"center top",BOTTOM:"center bottom",TOPLEFT:"left top",TOPRIGHT:"right top",BOTTOMLEFT:"left bottom",BOTTOMRIGHT:"right bottom"},a={NONE:"no-repeat",VERTICAL:"repeat-x",HORIZONTAL:"repeat-y",BOTH:"repeat"};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.SizeMode=r,o.PositionMode=n,o.RepeatMode=a,o.prototype._updateProperties=function(){var t=this.getProperties();if(this._imageUrl){var e=this._imageUrl;(e.indexOf("(")>=0||e.indexOf(")")>=0)&&(e=e.split("(").join("%28"),e=e.split(")").join("%29")),t.backgroundImage="url("+e+")"}else t.backgroundImage="";t.backgroundSize=this._sizeMode,t.backgroundPosition=this._positionMode,t.backgroundRepeat=this._repeatMode,this.setProperties(t)},o.prototype.setContent=function(t){this._imageUrl=t,this._updateProperties()},o.prototype.getContent=function(){return this._imageUrl},o.prototype.setSizeMode=function(t){this._sizeMode=t,this._updateProperties()},o.prototype.getSizeMode=function(){return this._sizeMode},o.prototype.setPositionMode=function(t){this._positionMode=t,this._updateProperties()},o.prototype.getPositionMode=function(){return this._positionMode},o.prototype.setRepeatMode=function(t){this._repeatMode=t,this._updateProperties()},o.prototype.getRepeatMode=function(){return this._repeatMode},o.prototype.deploy=function(t){t.innerHTML="",this._imageUrl&&(t.style.backgroundImage="url("+this._imageUrl+")")},o.prototype.recall=function(t){t.style.backgroundImage=""},i.exports=o}),i("famous-flex/LayoutUtility",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function o(){}function s(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;var i=t.length;if(i!==e.length)return!1;for(;i--;)if(t[i]!==e[i])return!1;return!0}var r=t("famous/utilities/Utility");o.registeredHelpers={};var n={SEQUENCE:1,DIRECTION_X:2,DIRECTION_Y:4,SCROLLING:8};o.Capabilities=n,o.normalizeMargins=function(t){return t?Array.isArray(t)?0===t.length?[0,0,0,0]:1===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:t:[t,t,t,t]:[0,0,0,0]},o.cloneSpec=function(t){var e={};return void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.size&&(e.size=t.size.slice(0)),void 0!==t.transform&&(e.transform=t.transform.slice(0)),void 0!==t.origin&&(e.origin=t.origin.slice(0)),void 0!==t.align&&(e.align=t.align.slice(0)),e},o.isEqualSpec=function(t,e){return t.opacity!==e.opacity?!1:s(t.size,e.size)&&s(t.transform,e.transform)&&s(t.origin,e.origin)&&s(t.align,e.align)?!0:!1},o.getSpecDiffText=function(t,e){var i="spec diff:";return t.opacity!==e.opacity&&(i+="\nopacity: "+t.opacity+" != "+e.opacity),s(t.size,e.size)||(i+="\nsize: "+JSON.stringify(t.size)+" != "+JSON.stringify(e.size)),s(t.transform,e.transform)||(i+="\ntransform: "+JSON.stringify(t.transform)+" != "+JSON.stringify(e.transform)),s(t.origin,e.origin)||(i+="\norigin: "+JSON.stringify(t.origin)+" != "+JSON.stringify(e.origin)),s(t.align,e.align)||(i+="\nalign: "+JSON.stringify(t.align)+" != "+JSON.stringify(e.align)),i},o.error=function(t){throw console.log("ERROR: "+t),t},o.warning=function(t){console.log("WARNING: "+t)},o.log=function(){for(var t="",e=0;e<arguments.length;e++){var i=arguments[e];t+=i instanceof Object||i instanceof Array?JSON.stringify(i):i}console.log(t)},o.combineOptions=function(t,e,i){if(t&&!e&&!i)return t;if(!t&&e&&!i)return e;var o=r.clone(t||{});if(e)for(var s in e)o[s]=e[s];return o},o.registerHelper=function(t,e){e.prototype.parse||o.error('The layout-helper for name "'+t+'" is required to support the "parse" method'),void 0!==this.registeredHelpers[t]&&o.warning('A layout-helper with the name "'+t+'" is already registered and will be overwritten'),this.registeredHelpers[t]=e},o.unregisterHelper=function(t){delete this.registeredHelpers[t]},o.getRegisteredHelper=function(t){return this.registeredHelpers[t]},i.exports=o}),i("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function o(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}o.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},o.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},o.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},o.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},o.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var e=[0,0],i=0;t>i;i++){var o=this.array[i].getSize();if(!o)return void 0;void 0!==e[0]&&(void 0===o[0]?e[0]=void 0:e[0]+=o[0]),void 0!==e[1]&&(void 0===o[1]?e[1]=void 0:e[1]+=o[1]),this.cumulativeSizes[i+1]=e.slice()}return this.sizeDirty=!1,e},o.Backing.prototype.reindex=function(t,e,i){if(this.array[0]){for(var o=0,s=this.firstIndex,r=i-e,n=this.firstNode;t-1>s;)n=n.getNext(),s++;var a=n;for(o=0;e>o;o++)n=n.getNext(),n&&(n._previousNode=a);var l=n?n.getNext():null;for(a._nextNode=null,n=a,o=0;i>o;o++)n=n.getNext();if(s+=i,n!==l&&(n._nextNode=l,l&&(l._previousNode=n)),l)for(n=l,s++;n&&s<this.array.length+this.firstIndex;)n._nextNode?n.index+=r:n.index=s,n=n.getNext(),s++;this.trackSize&&(this.sizeDirty=!0)}},o.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},o.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode
},o.prototype.indexOf=function(t){return this._.array.indexOf(t)},o.prototype.getIndex=function(){return this.index},o.prototype.toString=function(){return""+this.index},o.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},o.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var o=this._previousNode,s=this._nextNode,r=this.index,n=t._previousNode,a=t._nextNode,l=t.index;this.index=l,this._previousNode=n===this?t:n,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=r,t._previousNode=o===t?this:o,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},o.prototype.get=function(){return this._.getValue(this.index)},o.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},o.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=o}),i("famous-flex/LayoutContext",["require","exports","module"],function(t,e,i){function o(t){for(var e in t)this[e]=t[e]}o.prototype.size=void 0,o.prototype.direction=void 0,o.prototype.scrollOffset=void 0,o.prototype.scrollStart=void 0,o.prototype.scrollEnd=void 0,o.prototype.next=function(){},o.prototype.prev=function(){},o.prototype.get=function(){},o.prototype.set=function(){},o.prototype.resolveSize=function(){},i.exports=o}),i("famous-flex/LayoutNodeManager",["require","exports","module","./LayoutContext","./LayoutUtility"],function(t,e,i){function o(t,e){this.LayoutNode=t,this._initLayoutNodeFn=e,this._layoutCount=0,this._context=new u({next:n.bind(this),prev:a.bind(this),get:l.bind(this),set:c.bind(this),resolveSize:h.bind(this),size:[0,0]}),this._contextState={},this._pool={layoutNodes:{size:0},resolveSize:[0,0]}}function s(t){t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._first=t._next,t.destroy(),this._pool.layoutNodes.size<d&&(this._pool.layoutNodes.size++,t._prev=void 0,t._next=this._pool.layoutNodes.first,this._pool.layoutNodes.first=t)}function r(t,e){var i,o=this._contextState;if(!o.start){for(i=this._first;i&&i.renderNode!==t;)i=i._next;return i||(i=this.createNode(t),i._next=this._first,this._first&&(this._first._prev=i),this._first=i),o.start=i,o.startPrev=e,o.prev=i,o.next=i,i}if(e){if(o.prev._prev&&o.prev._prev.renderNode===t)return o.prev=o.prev._prev,o.prev}else if(o.next._next&&o.next._next.renderNode===t)return o.next=o.next._next,o.next;for(i=this._first;i&&i.renderNode!==t;)i=i._next;return i?(i._next&&(i._next._prev=i._prev),i._prev?i._prev._next=i._next:this._first=i._next,i._next=void 0,i._prev=void 0):i=this.createNode(t),e?(o.prev._prev?(i._prev=o.prev._prev,o.prev._prev._next=i):this._first=i,o.prev._prev=i,i._next=o.prev,o.prev=i):(o.next._next&&(i._next=o.next._next,o.next._next._prev=i),o.next._next=i,i._prev=o.next,o.next=i),i}function n(){if(!this._contextState.nextSequence)return void 0;if(this._context.reverse&&(this._contextState.nextSequence=this._contextState.nextSequence.getNext(),!this._contextState.nextSequence))return void 0;var t=this._contextState.nextSequence.get();if(!t)return void(this._contextState.nextSequence=void 0);var e=this._contextState.nextSequence;if(this._context.reverse||(this._contextState.nextSequence=this._contextState.nextSequence.getNext()),this._contextState.lastRenderNode===t)throw"ViewSequence is corrupted, should never contain the same renderNode twice, index: "+e.getIndex();return this._contextState.lastRenderNode=t,{renderNode:t,viewSequence:e,next:!0,index:++this._contextState.nextGetIndex}}function a(){if(!this._contextState.prevSequence)return void 0;if(!this._context.reverse&&(this._contextState.prevSequence=this._contextState.prevSequence.getPrevious(),!this._contextState.prevSequence))return void 0;var t=this._contextState.prevSequence.get();if(!t)return void(this._contextState.prevSequence=void 0);var e=this._contextState.prevSequence;if(this._context.reverse&&(this._contextState.prevSequence=this._contextState.prevSequence.getPrevious()),this._contextState.lastRenderNode===t)throw"ViewSequence is corrupted, should never contain the same renderNode twice, index: "+e.getIndex();return this._contextState.lastRenderNode=t,{renderNode:t,viewSequence:e,prev:!0,index:--this._contextState.prevGetIndex}}function l(t){if(this._nodesById&&(t instanceof String||"string"==typeof t)){var e=this._nodesById[t];if(!e)return void 0;if(e instanceof Array){for(var i=[],o=0,s=e.length;s>o;o++)i.push({renderNode:e[o],arrayElement:!0});return i}return{renderNode:e,byId:!0}}return t}function c(t,e){var i=this._nodesById?l.call(this,t):t;if(i){var o=i.node;o||(i.next?(i.index<this._contextState.nextSetIndex&&p.error("Nodes must be layed out in the same order as they were requested!"),this._contextState.nextSetIndex=i.index):i.prev&&(i.index>this._contextState.prevSetIndex&&p.error("Nodes must be layed out in the same order as they were requested!"),this._contextState.prevSetIndex=i.index),o=r.call(this,i.renderNode,i.prev),o._viewSequence=i.viewSequence,o._layoutCount++,1===o._layoutCount&&this._contextState.addCount++,i.node=o),o.usesTrueSize=i.usesTrueSize,o.trueSizeRequested=i.trueSizeRequested,o.set(e,this._context.size),i.set=e}return e}function h(t,e){var i=this._nodesById?l.call(this,t):t,o=this._pool.resolveSize;if(!i)return o[0]=0,o[1]=0,o;var s=i.renderNode,r=s.getSize();if(!r)return e;var n=s.size&&void 0!==s._trueSizeCheck?s.size:void 0;if(n&&(n[0]===!0||n[1]===!0)){i.usesTrueSize=!0;var a=s._backupSize;if((s._contentDirty||s._trueSizeCheck)&&(this._trueSizeRequested=!0,i.trueSizeRequested=!0),s._trueSizeCheck&&a&&n!==r){var c=n[0]===!0?Math.max(a[0],r[0]):r[0],h=n[1]===!0?Math.max(a[1],r[1]):r[1];a[0]=c,a[1]=h,r=a,s._backupSize=void 0,a=void 0}(this._reevalTrueSize||a&&(a[0]!==r[0]||a[1]!==r[1]))&&(s._trueSizeCheck=!0,s._sizeDirty=!0,this._trueSizeRequested=!0),a||(s._backupSize=[0,0],a=s._backupSize),a[0]=r[0],a[1]=r[1]}return n=s._nodes?s.options.size:void 0,!n||n[0]!==!0&&n[1]!==!0||(this._reevalTrueSize||s._nodes._trueSizeRequested)&&(i.usesTrueSize=!0,i.trueSizeRequested=!0,this._trueSizeRequested=!0),(void 0===r[0]||r[0]===!0||void 0===r[1]||r[1]===!0)&&(o[0]=r[0],o[1]=r[1],r=o,void 0===r[0]?r[0]=e[0]:r[0]===!0&&(r[0]=0,this._trueSizeRequested=!0,i.trueSizeRequested=!0),void 0===r[1]?r[1]=e[1]:r[1]===!0&&(r[1]=0,this._trueSizeRequested=!0,i.trueSizeRequested=!0)),r}var u=t("./LayoutContext"),p=t("./LayoutUtility"),d=100;o.prototype.prepareForLayout=function(t,e,i){for(var o=this._first;o;)o.reset(),o=o._next;var s=this._context;this._layoutCount++,this._nodesById=e,this._trueSizeRequested=!1,this._reevalTrueSize=i.reevalTrueSize||!s.size||s.size[0]!==i.size[0]||s.size[1]!==i.size[1];var r=this._contextState;return r.startSequence=t,r.nextSequence=t,r.prevSequence=t,r.start=void 0,r.nextGetIndex=0,r.prevGetIndex=0,r.nextSetIndex=0,r.prevSetIndex=0,r.addCount=0,r.removeCount=0,r.lastRenderNode=void 0,s.size[0]=i.size[0],s.size[1]=i.size[1],s.direction=i.direction,s.reverse=i.reverse,s.alignment=i.reverse?1:0,s.scrollOffset=i.scrollOffset||0,s.scrollStart=i.scrollStart||0,s.scrollEnd=i.scrollEnd||s.size[s.direction],s},o.prototype.removeNonInvalidatedNodes=function(t){for(var e=this._first;e;)e._invalidated||e._removing||e.remove(t),e=e._next},o.prototype.removeVirtualViewSequenceNodes=function(){this._contextState.startSequence&&this._contextState.startSequence.cleanup&&this._contextState.startSequence.cleanup()},o.prototype.buildSpecAndDestroyUnrenderedNodes=function(t){for(var e=[],i={specs:e,modified:!1},o=this._first;o;){var r=o._specModified,n=o.getSpec();if(n.removed){var a=o;o=o._next,s.call(this,a),i.modified=!0}else r&&(n.transform&&t&&(n.transform[12]+=t[0],n.transform[13]+=t[1],n.transform[14]+=t[2],n.transform[12]=Math.round(1e5*n.transform[12])/1e5,n.transform[13]=Math.round(1e5*n.transform[13])/1e5,n.endState&&(n.endState.transform[12]+=t[0],n.endState.transform[13]+=t[1],n.endState.transform[14]+=t[2],n.endState.transform[12]=Math.round(1e5*n.endState.transform[12])/1e5,n.endState.transform[13]=Math.round(1e5*n.endState.transform[13])/1e5)),i.modified=!0),e.push(n),o=o._next}return this._contextState.addCount=0,this._contextState.removeCount=0,i},o.prototype.getNodeByRenderNode=function(t){for(var e=this._first;e;){if(e.renderNode===t)return e;e=e._next}return void 0},o.prototype.insertNode=function(t){t._next=this._first,this._first&&(this._first._prev=t),this._first=t},o.prototype.setNodeOptions=function(t){this._nodeOptions=t;for(var e=this._first;e;)e.setOptions(t),e=e._next;for(e=this._pool.layoutNodes.first;e;)e.setOptions(t),e=e._next},o.prototype.preallocateNodes=function(t,e){for(var i=[],o=0;t>o;o++)i.push(this.createNode(void 0,e));for(o=0;t>o;o++)s.call(this,i[o])},o.prototype.createNode=function(t,e){var i;return this._pool.layoutNodes.first?(i=this._pool.layoutNodes.first,this._pool.layoutNodes.first=i._next,this._pool.layoutNodes.size--,i.constructor.apply(i,arguments)):(i=new this.LayoutNode(t,e),this._nodeOptions&&i.setOptions(this._nodeOptions)),i._prev=void 0,i._next=void 0,i._viewSequence=void 0,i._layoutCount=0,this._initLayoutNodeFn&&this._initLayoutNodeFn.call(this,i,e),i},o.prototype.removeAll=function(){for(var t=this._first;t;){var e=t._next;s.call(this,t),t=e}this._first=void 0},o.prototype.getStartEnumNode=function(t){return void 0===t?this._first:t===!0?this._contextState.start&&this._contextState.startPrev?this._contextState.start._next:this._contextState.start:t===!1?this._contextState.start&&!this._contextState.startPrev?this._contextState.start._prev:this._contextState.start:void 0},i.exports=o}),i("famous-flex/LayoutNode",["require","exports","module","famous/core/Transform","./LayoutUtility"],function(t,e,i){function o(t,e){this.renderNode=t,this._spec=e?r.cloneSpec(e):{},this._spec.renderNode=t,this._specModified=!0,this._invalidated=!1,this._removing=!1}var s=t("famous/core/Transform"),r=t("./LayoutUtility");o.prototype.setRenderNode=function(t){this.renderNode=t,this._spec.renderNode=t},o.prototype.setOptions=function(){},o.prototype.destroy=function(){this.renderNode=void 0,this._spec.renderNode=void 0,this._viewSequence=void 0},o.prototype.reset=function(){this._invalidated=!1,this.trueSizeRequested=!1},o.prototype.setSpec=function(t){if(this._specModified=!0,t.align?(t.align||(this._spec.align=[0,0]),this._spec.align[0]=t.align[0],this._spec.align[1]=t.align[1]):this._spec.align=void 0,t.origin?(t.origin||(this._spec.origin=[0,0]),this._spec.origin[0]=t.origin[0],this._spec.origin[1]=t.origin[1]):this._spec.origin=void 0,t.size?(t.size||(this._spec.size=[0,0]),this._spec.size[0]=t.size[0],this._spec.size[1]=t.size[1]):this._spec.size=void 0,t.transform)if(t.transform)for(var e=0;16>e;e++)this._spec.transform[e]=t.transform[e];else this._spec.transform=t.transform.slice(0);else this._spec.transform=void 0;this._spec.opacity=t.opacity},o.prototype.set=function(t){this._invalidated=!0,this._specModified=!0,this._removing=!1;var e=this._spec;e.opacity=t.opacity,t.size?(e.size||(e.size=[0,0]),e.size[0]=t.size[0],e.size[1]=t.size[1]):e.size=void 0,t.origin?(e.origin||(e.origin=[0,0]),e.origin[0]=t.origin[0],e.origin[1]=t.origin[1]):e.origin=void 0,t.align?(e.align||(e.align=[0,0]),e.align[0]=t.align[0],e.align[1]=t.align[1]):e.align=void 0,this._spec.transform=t.skew||t.rotate||t.scale?s.build({translate:t.translate||[0,0,0],skew:t.skew||[0,0,0],scale:t.scale||[1,1,1],rotate:t.rotate||[0,0,0]}):t.translate?s.translate(t.translate[0],t.translate[1],t.translate[2]):void 0,this.scrollLength=t.scrollLength},o.prototype.getSpec=function(){return this._specModified=!1,this._spec.removed=!this._invalidated,this._spec},o.prototype.remove=function(){this._removing=!0},i.exports=o}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function o(t,e,i){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function s(t,e,i){return this.x=t,this.y=e,this.z=i,this}function r(t){return s.call(this,t[0],t[1],t[2]||0)}function n(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var l=new o(0,0,0);o.prototype.add=function(t){return s.call(l,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return s.call(l,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.mult=function(t){return s.call(l,t*this.x,t*this.y,t*this.z)},o.prototype.div=function(t){return this.mult(1/t)},o.prototype.cross=function(t){var e=this.x,i=this.y,o=this.z,r=t.x,n=t.y,a=t.z;return s.call(l,o*n-i*a,e*a-o*r,i*r-e*n)},o.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.rotateX=function(t){var e=this.x,i=this.y,o=this.z,r=Math.cos(t),n=Math.sin(t);return s.call(l,e,i*r-o*n,i*n+o*r)},o.prototype.rotateY=function(t){var e=this.x,i=this.y,o=this.z,r=Math.cos(t),n=Math.sin(t);return s.call(l,o*n+e*r,i,o*r-e*n)},o.prototype.rotateZ=function(t){var e=this.x,i=this.y,o=this.z,r=Math.cos(t),n=Math.sin(t);return s.call(l,e*r-i*n,e*n+i*r,o)},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?n.call(l,this.mult(t/e)):s.call(l,t,0,0)},o.prototype.clone=function(){return new o(this)},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.set=function(t){return t instanceof Array?r.call(this,t):"number"==typeof t?a.call(this,t):n.call(this,t)},o.prototype.setXYZ=function(){return s.apply(this,arguments)},o.prototype.set1D=function(t){return a.call(this,t)},o.prototype.put=function(t){this===l?n.call(t,l):n.call(t,this)},o.prototype.clear=function(){return s.call(this,0,0,0)},o.prototype.cap=function c(c){if(1/0===c)return n.call(l,this);var t=this.norm();return t>c?n.call(l,this.mult(c/t)):n.call(l,this)},o.prototype.project=function(t){return t.mult(this.dot(t))},o.prototype.reflectAcross=function(t){return t.normalize().put(t),n(l,this.sub(this.project(t).mult(2)))},o.prototype.get=function(){return[this.x,this.y,this.z]},o.prototype.get1D=function(){return this.x},i.exports=o}),i("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(t,e,i){var o={};o.integrateVelocity=function(t,e){var i=t.velocity,o=t.inverseMass,s=t.force;s.isZero()||(i.add(s.mult(e*o)).put(i),s.clear())},o.integratePosition=function(t,e){var i=t.position,o=t.velocity;i.add(o.mult(e)).put(i)},o.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,o=t.torque;o.isZero()||(i.add(o.mult(e)).put(i),o.clear())},o.integrateOrientation=function(t,e){var i=t.orientation,o=t.angularVelocity;o.isZero()||i.add(i.multiply(o).scalarMultiply(.5*e)).put(i)},i.exports=o}),i("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function o(t){t=t||{};var e=o.DEFAULT_OPTIONS;this.position=new r,this.velocity=new r,this.force=new r,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:e.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.transform=n.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var r=t("../../math/Vector"),n=t("../../core/Transform"),a=t("../../core/EventHandler"),l=t("../integrators/SymplecticEuler");o.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var c={start:"start",update:"update",end:"end"},h=Date.now;o.prototype.isBody=!1,o.prototype.isActive=function(){return!this._isSleeping},o.prototype.sleep=function(){this._isSleeping||(this.emit(c.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this.emit(c.start,this),this._isSleeping=!1,this._prevTime=h(),this._engine&&this._engine.wake())},o.prototype.setPosition=function(t){this.position.set(t)},o.prototype.setPosition1D=function(t){this.position.x=t},o.prototype.getPosition=function(){return this._engine.step(),this.position.get()},o.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},o.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},o.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},o.prototype.getVelocity=function(){return this.velocity.get()},o.prototype.setForce=function(t){this.force.set(t),this.wake()},o.prototype.getVelocity1D=function(){return this.velocity.x},o.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},o.prototype.getMass=function(){return this.mass},o.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},o.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},o.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},o.prototype.integrateVelocity=function(t){l.integrateVelocity(this,t)},o.prototype.integratePosition=function(t){l.integratePosition(this,t)},o.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},o.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},o.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.transform;return e[12]=t.x,e[13]=t.y,e[14]=t.z,e},o.prototype.modify=function(t){var e=this._spec.target;return e.transform=this.getTransform(),e.target=t,this._spec},o.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=o}),i("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(t,e,i){function o(t){this.force=new s(t),this._eventOutput=new r,r.setOutputHandler(this,this._eventOutput)}var s=t("../../math/Vector"),r=t("../../core/EventHandler");o.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},o.prototype.applyForce=function(t){for(var e=t.length;e--;)t[e].applyForce(this.force)},o.prototype.getEnergy=function(){return 0},i.exports=o}),i("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(t,e,i){function o(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new l(0,0,0),n.call(this)}function s(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function r(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function n(){s.call(this),r.call(this)}var a=t("./Force"),l=t("../../math/Vector");o.prototype=Object.create(a.prototype),o.prototype.constructor=o;var c=Math.PI,h=150;o.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,o=Math.max(Math.min(t,i),-i);return o/(1-o*o/(e*e))},HOOK:function(t){return t}},o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:o.FORCE_FUNCTIONS.HOOK},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof l&&(this.options.anchor=t.anchor.position),t.anchor instanceof l&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new l(t.anchor))),void 0!==t.period&&(t.period<h&&(t.period=h,console.warn("The period of a SpringTransition is capped at "+h+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),n.call(this),a.prototype.setOptions.call(this,t)},o.prototype.applyForce=function(t,e){var i,o,s,r,n,a,l=this.force,c=this.disp,h=this.options,u=h.stiffness,p=h.damping,d=h.length,f=h.maxLength,_=h.anchor||e.position,g=h.forceFunction;for(i=0;i<t.length;i++){if(o=t[i],s=o.position,r=o.velocity,_.sub(s).put(c),n=c.norm()-d,0===n)return;a=o.mass,u*=a,p*=a,c.normalize(u*g(n,f)).put(l),p&&(e?l.add(r.sub(e.velocity).mult(-p)).put(l):l.add(r.mult(-p)).put(l)),o.applyForce(l),e&&e.applyForce(l.mult(-1))}},o.prototype.getEnergy=function(t,e){for(var i=this.options,o=i.length,s=e?e.position:i.anchor,r=i.stiffness,n=0,a=0;a<t.length;a++){var l=t[a],c=s.sub(l.position).norm()-o;n+=.5*r*c*c}return n},i.exports=o}),i("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function r(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:e,source:i},s.call(this,t).push(this._currAgentId),this._currAgentId++}function n(t){return this._agentData[t]}function a(t){var e=n.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function l(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t,e){var i=this._agentData[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function h(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)c.call(this,i,t);e++}}function u(t,e){t.integrateVelocity(e),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function p(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function d(t,e){t.integrateOrientation(e)}function f(t,e){t.integratePosition(e),t.emit(b.update,t)}function _(t){l.call(this,t),this.forEach(u,t),this.forEachBody(p,t),h.call(this,t),this.forEachBody(d,t),this.forEach(f,t)}function g(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e}),t}function v(){var t=0;for(var e in this._agentData)t+=this.getAgentEnergy(e);return t}var y=t("../core/EventHandler"),m=17,S=1e3/120,x=17,w=Date.now,b={start:"start",update:"update",end:"end"};o.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},o.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},o.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},o.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var o in this._agentData)this._agentData.hasOwnProperty(o)&&this.detachFrom(this._agentData[o].id,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},o.prototype.attach=function(t,e,i){if(this.wake(),t instanceof Array){for(var o=[],s=0;s<t.length;s++)o[s]=r.call(this,t[s],e,i);return o}return r.call(this,t,e,i)},o.prototype.attachTo=function(t,e){n.call(this,t).targets.push(e)},o.prototype.detach=function(t){var e=this.getAgent(t),i=s.call(this,e),o=i.indexOf(t);i.splice(o,1),delete this._agentData[t]},o.prototype.detachFrom=function(t,e){var i=n.call(this,t);if(i.source===e)this.detach(t);else{var o=i.targets,s=o.indexOf(e);s>-1&&o.splice(s,1)}},o.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},o.prototype.getAgent=function(t){return n.call(this,t).agent},o.prototype.getParticles=function(){return this._particles},o.prototype.getBodies=function(){return this._bodies},o.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},o.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),o=0,s=i.length;s>o;o++)t.call(this,i[o],e)},o.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),o=0,s=i.length;s>o;o++)t.call(this,i[o],e)},o.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},o.prototype.getAgentEnergy=function(t){var e=n.call(this,t);return e.agent.getEnergy(e.targets,e.source)},o.prototype.getEnergy=function(){return g.call(this)+v.call(this)},o.prototype.step=function(){if(!this.isSleeping()){var t=w(),e=t-this._prevTime;this._prevTime=t,S>e||(e>x&&(e=x),_.call(this,m),this.emit(b.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},o.prototype.isSleeping=function(){return this._isSleeping},o.prototype.isActive=function(){return!this._isSleeping},o.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(b.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this._prevTime=w(),this.emit(b.start,this),this._isSleeping=!1)},o.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},o.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new y),this._eventHandler.on(t,e)},i.exports=o}),i("famous-flex/FlowLayoutNode",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/math/Vector","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/PhysicsEngine","./LayoutNode","famous/transitions/Transitionable"],function(t,e,i){function o(t,e){if(f.apply(this,arguments),this.options||(this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new l(this.options)),this._pe||(this._pe=new d,this._pe.sleep()),this._properties)for(var i in this._properties)this._properties[i].init=!1;else this._properties={};this._lockTransitionable?(this._lockTransitionable.halt(),this._lockTransitionable.reset(1)):this._lockTransitionable=new _(1),this._specModified=!0,this._initial=!0,this._spec.endState={},e&&this.setSpec(e)}function s(t,e,i,o){return t&&t.init?[t.enabled[0]?Math.round((t.curState.x+(t.endState.x-t.curState.x)*o)/i)*i:t.endState.x,t.enabled[1]?Math.round((t.curState.y+(t.endState.y-t.curState.y)*o)/i)*i:t.endState.y,t.enabled[2]?Math.round((t.curState.z+(t.endState.z-t.curState.z)*o)/i)*i:t.endState.z]:e}function r(t,e,i,o,s){if(t=t||this._properties[e],t&&t.init){t.invalidated=!0;var r=o;return void 0!==i?r=i:this._removing&&(r=t.particle.getPosition()),t.endState.x=r[0],t.endState.y=r.length>1?r[1]:0,t.endState.z=r.length>2?r[2]:0,void(s?(t.curState.x=t.endState.x,t.curState.y=t.endState.y,t.curState.z=t.endState.z,t.velocity.x=0,t.velocity.y=0,t.velocity.z=0):(t.endState.x!==t.curState.x||t.endState.y!==t.curState.y||t.endState.z!==t.curState.z)&&this._pe.wake())}var n=this._pe.isSleeping();t?(t.particle.setPosition(this._initial||s?i:o),t.endState.set(i)):(t={particle:new u({position:this._initial||s?i:o}),endState:new h(i)},t.curState=t.particle.position,t.velocity=t.particle.velocity,t.force=new p(this.options.spring),t.force.setOptions({anchor:t.endState}),this._pe.addBody(t.particle),t.forceId=this._pe.attach(t.force,t.particle),this._properties[e]=t),this._initial||s?n&&this._pe.sleep():this._pe.wake(),t.enabled=this.options.properties[e]&&this.options.properties[e].length?this.options.properties[e]:[this.options.properties[e],this.options.properties[e],this.options.properties[e]],t.init=!0,t.invalidated=!0}function n(t,e){return t[0]===e[0]&&t[1]===e[1]?void 0:t}function a(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]?void 0:t}var l=t("famous/core/OptionsManager"),c=t("famous/core/Transform"),h=t("famous/math/Vector"),u=t("famous/physics/bodies/Particle"),p=t("famous/physics/forces/Spring"),d=t("famous/physics/PhysicsEngine"),f=t("./LayoutNode"),_=t("famous/transitions/Transitionable");o.prototype=Object.create(f.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={spring:{dampingRatio:.8,period:300},properties:{opacity:!0,align:!0,origin:!0,size:!0,translate:!0,skew:!0,rotate:!0,scale:!0},particleRounding:.001};var g={opacity:1,opacity2D:[1,0],size:[0,0],origin:[0,0],align:[0,0],scale:[1,1,1],translate:[0,0,0],rotate:[0,0,0],skew:[0,0,0]};o.prototype.setOptions=function(t){this._optionsManager.setOptions(t);var e=this._pe.isSleeping();for(var i in this._properties){var o=this._properties[i];t.spring&&o.force&&o.force.setOptions(this.options.spring),t.properties&&void 0!==t.properties[i]&&(o.enabled=this.options.properties[i].length?this.options.properties[i]:[this.options.properties[i],this.options.properties[i],this.options.properties[i]])}return e&&this._pe.sleep(),this},o.prototype.setSpec=function(t){var e;t.transform&&(e=c.interpret(t.transform)),e||(e={}),e.opacity=t.opacity,e.size=t.size,e.align=t.align,e.origin=t.origin;var i=this._removing,o=this._invalidated;this.set(e),this._removing=i,this._invalidated=o},o.prototype.reset=function(){if(this._invalidated){for(var t in this._properties)this._properties[t].invalidated=!1;this._invalidated=!1}this.trueSizeRequested=!1,this.usesTrueSize=!1},o.prototype.remove=function(t){this._removing=!0,t?this.setSpec(t):(this._pe.sleep(),this._specModified=!1),this._invalidated=!1},o.prototype.releaseLock=function(t){this._lockTransitionable.halt(),this._lockTransitionable.reset(0),t&&this._lockTransitionable.set(1,{duration:this.options.spring.period||1e3})},o.prototype.getSpec=function(){var t=this._pe.isSleeping();if(!this._specModified&&t)return this._spec.removed=!this._invalidated,this._spec;this._initial=!1,this._specModified=!t,this._spec.removed=!1,t||this._pe.step();var e=this._spec,i=this.options.particleRounding,o=this._lockTransitionable.get(),r=this._properties.opacity;r&&r.init?(e.opacity=r.enabled[0]?Math.round(Math.max(0,Math.min(1,r.curState.x))/i)*i:r.endState.x,e.endState.opacity=r.endState.x):(e.opacity=void 0,e.endState.opacity=void 0),r=this._properties.size,r&&r.init?(e.size=e.size||[0,0],e.size[0]=r.enabled[0]?.1*Math.round((r.curState.x+(r.endState.x-r.curState.x)*o)/.1):r.endState.x,e.size[1]=r.enabled[1]?.1*Math.round((r.curState.y+(r.endState.y-r.curState.y)*o)/.1):r.endState.y,e.endState.size=e.endState.size||[0,0],e.endState.size[0]=r.endState.x,e.endState.size[1]=r.endState.y):(e.size=void 0,e.endState.size=void 0),r=this._properties.align,r&&r.init?(e.align=e.align||[0,0],e.align[0]=r.enabled[0]?.1*Math.round((r.curState.x+(r.endState.x-r.curState.x)*o)/.1):r.endState.x,e.align[1]=r.enabled[1]?.1*Math.round((r.curState.y+(r.endState.y-r.curState.y)*o)/.1):r.endState.y,e.endState.align=e.endState.align||[0,0],e.endState.align[0]=r.endState.x,e.endState.align[1]=r.endState.y):(e.align=void 0,e.endState.align=void 0),r=this._properties.origin,r&&r.init?(e.origin=e.origin||[0,0],e.origin[0]=r.enabled[0]?.1*Math.round((r.curState.x+(r.endState.x-r.curState.x)*o)/.1):r.endState.x,e.origin[1]=r.enabled[1]?.1*Math.round((r.curState.y+(r.endState.y-r.curState.y)*o)/.1):r.endState.y,e.endState.origin=e.endState.origin||[0,0],e.endState.origin[0]=r.endState.x,e.endState.origin[1]=r.endState.y):(e.origin=void 0,e.endState.origin=void 0);
var n,a,l,h=this._properties.translate;h&&h.init?(n=h.enabled[0]?Math.round((h.curState.x+(h.endState.x-h.curState.x)*o)/i)*i:h.endState.x,a=h.enabled[1]?Math.round((h.curState.y+(h.endState.y-h.curState.y)*o)/i)*i:h.endState.y,l=h.enabled[2]?Math.round((h.curState.z+(h.endState.z-h.curState.z)*o)/i)*i:h.endState.z):(n=0,a=0,l=0);var u=this._properties.scale,p=this._properties.skew,d=this._properties.rotate;return u||p||d?(e.transform=c.build({translate:[n,a,l],skew:s.call(this,p,g.skew,this.options.particleRounding,o),scale:s.call(this,u,g.scale,this.options.particleRounding,o),rotate:s.call(this,d,g.rotate,this.options.particleRounding,o)}),e.endState.transform=c.build({translate:h?[h.endState.x,h.endState.y,h.endState.z]:g.translate,scale:u?[u.endState.x,u.endState.y,u.endState.z]:g.scale,skew:p?[p.endState.x,p.endState.y,p.endState.z]:g.skew,rotate:d?[d.endState.x,d.endState.y,d.endState.z]:g.rotate})):h?(e.transform?(e.transform[12]=n,e.transform[13]=a,e.transform[14]=l):e.transform=c.translate(n,a,l),e.endState.transform?(e.endState.transform[12]=h.endState.x,e.endState.transform[13]=h.endState.y,e.endState.transform[14]=h.endState.z):e.endState.transform=c.translate(h.endState.x,h.endState.y,h.endState.z)):(e.transform=void 0,e.endState.transform=void 0),this._spec},o.prototype.set=function(t,e){e&&(this._removing=!1),this._invalidated=!0,this.scrollLength=t.scrollLength,this._specModified=!0;var i=this._properties.opacity,o=t.opacity===g.opacity?void 0:t.opacity;(void 0!==o||i&&i.init)&&r.call(this,i,"opacity",void 0===o?void 0:[o,0],g.opacity2D),i=this._properties.align,o=t.align?n(t.align,g.align):void 0,(o||i&&i.init)&&r.call(this,i,"align",o,g.align),i=this._properties.origin,o=t.origin?n(t.origin,g.origin):void 0,(o||i&&i.init)&&r.call(this,i,"origin",o,g.origin),i=this._properties.size,o=t.size||e,(o||i&&i.init)&&r.call(this,i,"size",o,e,this.usesTrueSize),i=this._properties.translate,o=t.translate,(o||i&&i.init)&&r.call(this,i,"translate",o,g.translate,void 0,!0),i=this._properties.scale,o=t.scale?a(t.scale,g.scale):void 0,(o||i&&i.init)&&r.call(this,i,"scale",o,g.scale),i=this._properties.rotate,o=t.rotate?a(t.rotate,g.rotate):void 0,(o||i&&i.init)&&r.call(this,i,"rotate",o,g.rotate),i=this._properties.skew,o=t.skew?a(t.skew,g.skew):void 0,(o||i&&i.init)&&r.call(this,i,"skew",o,g.skew)},i.exports=o}),i("famous-flex/helpers/LayoutDockHelper",["require","exports","module","../LayoutUtility"],function(t,e,i){function o(t,e){var i=t.size;if(this._size=i,this._context=t,this._options=e,this._z=e&&e.translateZ?e.translateZ:0,e&&e.margins){var o=s.normalizeMargins(e.margins);this._left=o[3],this._top=o[0],this._right=i[0]-o[1],this._bottom=i[1]-o[2]}else this._left=0,this._top=0,this._right=i[0],this._bottom=i[1]}var s=t("../LayoutUtility");o.prototype.parse=function(t){for(var e=0;e<t.length;e++){var i=t[e],o=i.length>=3?i[2]:void 0;"top"===i[0]?this.top(i[1],o,i.length>=4?i[3]:void 0):"left"===i[0]?this.left(i[1],o,i.length>=4?i[3]:void 0):"right"===i[0]?this.right(i[1],o,i.length>=4?i[3]:void 0):"bottom"===i[0]?this.bottom(i[1],o,i.length>=4?i[3]:void 0):"fill"===i[0]?this.fill(i[1],i.length>=3?i[2]:void 0):"margins"===i[0]&&this.margins(i[1])}},o.prototype.top=function(t,e,i){if(e instanceof Array&&(e=e[1]),void 0===e){var o=this._context.resolveSize(t,[this._right-this._left,this._bottom-this._top]);e=o[1]}return this._context.set(t,{size:[this._right-this._left,e],origin:[0,0],align:[0,0],translate:[this._left,this._top,void 0===i?this._z:i]}),this._top+=e,this},o.prototype.left=function(t,e,i){if(e instanceof Array&&(e=e[0]),void 0===e){var o=this._context.resolveSize(t,[this._right-this._left,this._bottom-this._top]);e=o[0]}return this._context.set(t,{size:[e,this._bottom-this._top],origin:[0,0],align:[0,0],translate:[this._left,this._top,void 0===i?this._z:i]}),this._left+=e,this},o.prototype.bottom=function(t,e,i){if(e instanceof Array&&(e=e[1]),void 0===e){var o=this._context.resolveSize(t,[this._right-this._left,this._bottom-this._top]);e=o[1]}return this._context.set(t,{size:[this._right-this._left,e],origin:[0,1],align:[0,1],translate:[this._left,-(this._size[1]-this._bottom),void 0===i?this._z:i]}),this._bottom-=e,this},o.prototype.right=function(t,e,i){if(e instanceof Array&&(e=e[0]),t){if(void 0===e){var o=this._context.resolveSize(t,[this._right-this._left,this._bottom-this._top]);e=o[0]}this._context.set(t,{size:[e,this._bottom-this._top],origin:[1,0],align:[1,0],translate:[-(this._size[0]-this._right),this._top,void 0===i?this._z:i]})}return e&&(this._right-=e),this},o.prototype.fill=function(t,e){return this._context.set(t,{size:[this._right-this._left,this._bottom-this._top],translate:[this._left,this._top,void 0===e?this._z:e]}),this},o.prototype.margins=function(t){return t=s.normalizeMargins(t),this._left+=t[3],this._top+=t[0],this._right-=t[1],this._bottom-=t[2],this},s.registerHelper("dock",o),i.exports=o}),i("famous-flex/LayoutController",["require","exports","module","famous/utilities/Utility","famous/core/Entity","famous/core/ViewSequence","famous/core/OptionsManager","famous/core/EventHandler","./LayoutUtility","./LayoutNodeManager","./LayoutNode","./FlowLayoutNode","famous/core/Transform","./helpers/LayoutDockHelper"],function(t,e,i){function o(t,e){this.id=h.register(this),this._isDirty=!0,this._contextSizeCache=[0,0],this._commitOutput={},this._cleanupRegistration={commit:function(){return void 0},cleanup:function(t){this.cleanup(t)}.bind(this)},this._cleanupRegistration.target=h.register(this._cleanupRegistration),this._cleanupRegistration.render=function(){return this.target}.bind(this._cleanupRegistration),this._eventInput=new d,d.setInputHandler(this,this._eventInput),this._eventOutput=new d,d.setOutputHandler(this,this._eventOutput),this._layout={options:Object.create({})},this._layout.optionsManager=new p(this._layout.options),this._layout.optionsManager.on("change",function(){this._isDirty=!0}.bind(this)),this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),this._nodes=e?e:t&&t.flow?new _(v,s.bind(this)):new _(g),this.setDirection(void 0),t&&this.setOptions(t)}function s(t,e){!e&&this.options.flowOptions.insertSpec&&t.setSpec(this.options.flowOptions.insertSpec)}function r(t){var e=this._dataSource;if(e instanceof Array)for(var i=0,o=e.length;o>i;i++)t(e[i]);else if(e instanceof u)for(var s;e&&(s=e.get());)t(s),e=e.getNext();else for(var r in e)t(e[r])}function n(t){if(this._layout.capabilities&&this._layout.capabilities.direction){if(Array.isArray(this._layout.capabilities.direction)){for(var e=0;e<this._layout.capabilities.direction.length;e++)if(this._layout.capabilities.direction[e]===t)return t;return this._layout.capabilities.direction[0]}return this._layout.capabilities.direction}return void 0===t?c.Direction.Y:t}function a(t,e){var i=e||this._viewSequence,o=i?i.getIndex():t;if(t>o)for(;i;){if(i=i.getNext(),!i)return void 0;if(o=i.getIndex(),o===t)return i;if(o>t)return void 0}else if(o>t)for(;i;){if(i=i.getPrevious(),!i)return void 0;if(o=i.getIndex(),o===t)return i;if(t>o)return void 0}return i}function l(){return Array.isArray(this._dataSource)?this._dataSource:this._viewSequence||this._viewSequence._?this._viewSequence._.array:void 0}var c=t("famous/utilities/Utility"),h=t("famous/core/Entity"),u=t("famous/core/ViewSequence"),p=t("famous/core/OptionsManager"),d=t("famous/core/EventHandler"),f=t("./LayoutUtility"),_=t("./LayoutNodeManager"),g=t("./LayoutNode"),v=t("./FlowLayoutNode"),y=t("famous/core/Transform");t("./helpers/LayoutDockHelper"),o.DEFAULT_OPTIONS={flow:!1,flowOptions:{reflowOnResize:!0,properties:{opacity:!0,align:!0,origin:!0,size:!0,translate:!0,skew:!0,rotate:!0,scale:!0},spring:{dampingRatio:.8,period:300}}},o.prototype.setOptions=function(t){return void 0!==t.alignment&&t.alignment!==this.options.alignment&&(this._isDirty=!0),this._optionsManager.setOptions(t),t.nodeSpring&&(console.warn("nodeSpring options have been moved inside `flowOptions`. Use `flowOptions.spring` instead."),this._optionsManager.setOptions({flowOptions:{spring:t.nodeSpring}}),this._nodes.setNodeOptions(this.options.flowOptions)),void 0!==t.reflowOnResize&&(console.warn("reflowOnResize options have been moved inside `flowOptions`. Use `flowOptions.reflowOnResize` instead."),this._optionsManager.setOptions({flowOptions:{reflowOnResize:t.reflowOnResize}}),this._nodes.setNodeOptions(this.options.flowOptions)),t.insertSpec&&(console.warn("insertSpec options have been moved inside `flowOptions`. Use `flowOptions.insertSpec` instead."),this._optionsManager.setOptions({flowOptions:{insertSpec:t.insertSpec}}),this._nodes.setNodeOptions(this.options.flowOptions)),t.removeSpec&&(console.warn("removeSpec options have been moved inside `flowOptions`. Use `flowOptions.removeSpec` instead."),this._optionsManager.setOptions({flowOptions:{removeSpec:t.removeSpec}}),this._nodes.setNodeOptions(this.options.flowOptions)),t.dataSource&&this.setDataSource(t.dataSource),t.layout?this.setLayout(t.layout,t.layoutOptions):t.layoutOptions&&this.setLayoutOptions(t.layoutOptions),void 0!==t.direction&&this.setDirection(t.direction),t.flowOptions&&this.options.flow&&this._nodes.setNodeOptions(this.options.flowOptions),t.preallocateNodes&&this._nodes.preallocateNodes(t.preallocateNodes.count||0,t.preallocateNodes.spec),this},o.prototype.setDataSource=function(t){return this._dataSource=t,this._initialViewSequence=void 0,this._nodesById=void 0,t instanceof Array?(this._viewSequence=new u(t),this._initialViewSequence=this._viewSequence):t instanceof u||t.getNext?(this._viewSequence=t,this._initialViewSequence=t):t instanceof Object&&(this._nodesById=t),this.options.autoPipeEvents&&(this._dataSource.pipe?(this._dataSource.pipe(this),this._dataSource.pipe(this._eventOutput)):r.call(this,function(t){t&&t.pipe&&(t.pipe(this),t.pipe(this._eventOutput))}.bind(this))),this._isDirty=!0,this},o.prototype.getDataSource=function(){return this._dataSource},o.prototype.setLayout=function(t,e){if(t instanceof Function)this._layout._function=t,this._layout.capabilities=t.Capabilities,this._layout.literal=void 0;else if(t instanceof Object){this._layout.literal=t,this._layout.capabilities=void 0;var i=Object.keys(t)[0],o=f.getRegisteredHelper(i);this._layout._function=o?function(e,s){var r=new o(e,s);r.parse(t[i])}:void 0}else this._layout._function=void 0,this._layout.capabilities=void 0,this._layout.literal=void 0;return e&&this.setLayoutOptions(e),this.setDirection(this._configuredDirection),this._isDirty=!0,this},o.prototype.getLayout=function(){return this._layout.literal||this._layout._function},o.prototype.setLayoutOptions=function(t){return this._layout.optionsManager.setOptions(t),this},o.prototype.getLayoutOptions=function(){return this._layout.options},o.prototype.setDirection=function(t){this._configuredDirection=t;var e=n.call(this,t);e!==this._direction&&(this._direction=e,this._isDirty=!0)},o.prototype.getDirection=function(t){return t?this._direction:this._configuredDirection},o.prototype.getSpec=function(t,e,i){if(!t)return void 0;if(t instanceof String||"string"==typeof t){if(!this._nodesById)return void 0;if(t=this._nodesById[t],!t)return void 0;if(t instanceof Array)return t}if(this._specs)for(var o=0;o<this._specs.length;o++){var s=this._specs[o];if(s.renderNode===t){if(i&&s.endState&&(s=s.endState),e&&s.transform&&s.size&&(s.align||s.origin)){var r=s.transform;return s.align&&(s.align[0]||s.align[1])&&(r=y.thenMove(r,[s.align[0]*this._contextSizeCache[0],s.align[1]*this._contextSizeCache[1],0])),s.origin&&(s.origin[0]||s.origin[1])&&(r=y.moveThen([-s.origin[0]*s.size[0],-s.origin[1]*s.size[1],0],r)),{opacity:s.opacity,size:s.size,transform:r}}return s}}return void 0},o.prototype.reflowLayout=function(){return this._isDirty=!0,this},o.prototype.resetFlowState=function(){return this.options.flow&&(this._resetFlowState=!0),this},o.prototype.insert=function(t,e,i){if(t instanceof String||"string"==typeof t){if(void 0===this._dataSource&&(this._dataSource={},this._nodesById=this._dataSource),this._nodesById[t]===e)return this;this._nodesById[t]=e}else{void 0===this._dataSource&&(this._dataSource=[],this._viewSequence=new u(this._dataSource),this._initialViewSequence=this._viewSequence);var o=this._viewSequence||this._dataSource,s=l.call(this);if(s&&t===s.length&&(t=-1),-1===t)o.push(e);else if(0===t)if(o===this._viewSequence){if(o.splice(0,0,e),0===this._viewSequence.getIndex()){var r=this._viewSequence.getNext();r&&r.get()&&(this._viewSequence=r)}}else o.splice(0,0,e);else o.splice(t,0,e)}return i&&this._nodes.insertNode(this._nodes.createNode(e,i)),this.options.autoPipeEvents&&e&&e.pipe&&(e.pipe(this),e.pipe(this._eventOutput)),this._isDirty=!0,this},o.prototype.push=function(t,e){return this.insert(-1,t,e)},o.prototype.get=function(t){if(this._nodesById||t instanceof String||"string"==typeof t)return this._nodesById[t];var e=a.call(this,t);return e?e.get():void 0},o.prototype.swap=function(t,e){var i=l.call(this);if(!i)throw".swap is only supported for dataSources of type Array or ViewSequence";if(t===e)return this;if(0>t||t>=i.length)throw"Invalid index ("+t+") specified to .swap";if(0>e||e>=i.length)throw"Invalid second index ("+e+") specified to .swap";var o=i[t];return i[t]=i[e],i[e]=o,this._isDirty=!0,this},o.prototype.replace=function(t,e,i){var o;if(this._nodesById||t instanceof String||"string"==typeof t){if(o=this._nodesById[t],o!==e){if(i&&o){var s=this._nodes.getNodeByRenderNode(o);s&&s.setRenderNode(e)}this._nodesById[t]=e,this._isDirty=!0}return o}var r=l.call(this);if(!r)return void 0;if(0>t||t>=r.length)throw"Invalid index ("+t+") specified to .replace";return o=r[t],o!==e&&(r[t]=e,this._isDirty=!0),o},o.prototype.move=function(t,e){var i=l.call(this);if(!i)throw".move is only supported for dataSources of type Array or ViewSequence";if(0>t||t>=i.length)throw"Invalid index ("+t+") specified to .move";if(0>e||e>=i.length)throw"Invalid newIndex ("+e+") specified to .move";var o=i.splice(t,1)[0];return i.splice(e,0,o),this._isDirty=!0,this},o.prototype.remove=function(t,e){var i;if(this._nodesById||t instanceof String||"string"==typeof t){if(t instanceof String||"string"==typeof t)i=this._nodesById[t],i&&delete this._nodesById[t];else for(var o in this._nodesById)if(this._nodesById[o]===t){delete this._nodesById[o],i=t;break}}else if(t instanceof Number||"number"==typeof t){var s=l.call(this);if(!s||0>t||t>=s.length)throw"Invalid index ("+t+") specified to .remove (or dataSource doesn't support remove)";i=s[t],this._dataSource.splice(t,1)}else t=this._dataSource.indexOf(t),t>=0&&(this._dataSource.splice(t,1),i=t);if(this._viewSequence&&i){var r=a.call(this,this._viewSequence.getIndex(),this._initialViewSequence);r=r||a.call(this,this._viewSequence.getIndex()-1,this._initialViewSequence),r=r||this._dataSource,this._viewSequence=r}if(i&&e){var n=this._nodes.getNodeByRenderNode(i);n&&n.remove(e||this.options.flowOptions.removeSpec)}return i&&(this._isDirty=!0),i},o.prototype.removeAll=function(t){if(this._nodesById){var e=!1;for(var i in this._nodesById)delete this._nodesById[i],e=!0;e&&(this._isDirty=!0)}else this._dataSource&&this.setDataSource([]);if(t)for(var o=this._nodes.getStartEnumNode();o;)o.remove(t||this.options.flowOptions.removeSpec),o=o._next;return this},o.prototype.getSize=function(){return this._size||this.options.size},o.prototype.render=function(){return this.id},o.prototype.commit=function(t){var e=t.transform,i=t.origin,o=t.size,s=t.opacity;if(this._resetFlowState&&(this._resetFlowState=!1,this._isDirty=!0,this._nodes.removeAll()),o[0]!==this._contextSizeCache[0]||o[1]!==this._contextSizeCache[1]||this._isDirty||this._nodes._trueSizeRequested||this.options.alwaysLayout){var r={target:this,oldSize:this._contextSizeCache,size:o,dirty:this._isDirty,trueSizeRequested:this._nodes._trueSizeRequested};if(this._eventOutput.emit("layoutstart",r),this.options.flow){var n=!1;if(this.options.flowOptions.reflowOnResize||(n=this._isDirty||o[0]===this._contextSizeCache[0]&&o[1]===this._contextSizeCache[1]?!0:void 0),void 0!==n)for(var a=this._nodes.getStartEnumNode();a;)a.releaseLock(n),a=a._next}this._contextSizeCache[0]=o[0],this._contextSizeCache[1]=o[1],this._isDirty=!1;var l;this.options.size&&this.options.size[this._direction]===!0&&(l=1e6);var c=this._nodes.prepareForLayout(this._viewSequence,this._nodesById,{size:o,direction:this._direction,scrollEnd:l});if(this._layout._function&&this._layout._function(c,this._layout.options),this._nodes.removeNonInvalidatedNodes(this.options.flowOptions.removeSpec),this._nodes.removeVirtualViewSequenceNodes(),l){for(l=0,a=this._nodes.getStartEnumNode();a;)a._invalidated&&a.scrollLength&&(l+=a.scrollLength),a=a._next;this._size=this._size||[0,0],this._size[0]=this.options.size[0],this._size[1]=this.options.size[1],this._size[this._direction]=l}var h=this._nodes.buildSpecAndDestroyUnrenderedNodes();this._specs=h.specs,this._commitOutput.target=h.specs,this._eventOutput.emit("layoutend",r),this._eventOutput.emit("reflow",{target:this})}else this.options.flow&&(h=this._nodes.buildSpecAndDestroyUnrenderedNodes(),this._specs=h.specs,this._commitOutput.target=h.specs,h.modified&&this._eventOutput.emit("reflow",{target:this}));for(var u=this._commitOutput.target,p=0,d=u.length;d>p;p++)u[p].renderNode&&(u[p].target=u[p].renderNode.render());return u.length&&u[u.length-1]===this._cleanupRegistration||u.push(this._cleanupRegistration),!i||0===i[0]&&0===i[1]||(e=y.moveThen([-o[0]*i[0],-o[1]*i[1],0],e)),this._commitOutput.size=o,this._commitOutput.opacity=s,this._commitOutput.transform=e,this._commitOutput},o.prototype.cleanup=function(){this.options.flow&&(this._resetFlowState=!0)},i.exports=o}),i("famous/surfaces/ContainerSurface",["require","exports","module","../core/Surface","../core/Context"],function(t,e,i){function o(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new r(this._container),this.setContent(this._container)}var s=t("../core/Surface"),r=t("../core/Context");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},o.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},o.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},i.exports=o}),i("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function o(t){n.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),r=t("./Transform"),n=t("./Surface");o.SIZE_ZERO=[0,0],o.prototype=Object.create(n.prototype),o.prototype.elementType="div",o.prototype.elementClass="famous-group",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return n.prototype.render.call(this)},o.prototype.deploy=function(t){this.context.migrate(t)},o.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},o.prototype.commit=function(t){var e=t.transform,i=t.origin,s=t.opacity,a=t.size,l=n.prototype.commit.call(this,{allocator:t.allocator,transform:r.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:s,origin:i,size:o.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:r.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),l},i.exports=o}),i("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},o.DEFAULT_OPTIONS={strength:.01,forceFunction:o.FORCE_FUNCTIONS.LINEAR},o.prototype.applyForce=function(t){var e,i,o=this.options.strength,s=this.options.forceFunction,r=this.force;for(e=0;e<t.length;e++)i=t[e],s(i.velocity).mult(-o).put(r),i.applyForce(r)},o.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=o}),i("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(t,e,i){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new l(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",r.bind(this)),this._eventInput.on("wheel",r.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&h()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function r(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,g=this._payload,g.slip=!0,g.position=this._position,g.clientX=t.clientX,g.clientY=t.clientY,g.offsetX=t.offsetX,g.offsetY=t.offsetY,this._eventOutput.emit("start",g),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=h(),i=this._prevTime||e,r=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,n=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(r*=this.options.lineHeight,n*=this.options.lineHeight),this.options.rails&&(Math.abs(r)>Math.abs(n)?n=0:r=0);var l,u,p=Math.max(e-i,c),d=r/p,f=n/p,_=this.options.scale;this.options.direction===o.DIRECTION_X?(u=_*r,l=_*d,this._position+=u):this.options.direction===o.DIRECTION_Y?(u=_*n,l=_*f,this._position+=u):(u=[_*r,_*n],l=[_*d,_*f],this._position[0]+=u[0],this._position[1]+=u[1]);var g=this._payload;g.delta=u,g.velocity=l,g.position=this._position,g.slip=!0,this._eventOutput.emit("update",g),this._prevTime=e,this._prevVel=l}var n=t("../core/EventHandler"),a=t("../core/Engine"),l=t("../core/OptionsManager");o.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},o.DIRECTION_X=0,o.DIRECTION_Y=1;var c=8,h=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=o}),i("famous-flex/ScrollController",["require","exports","module","./LayoutUtility","./LayoutController","./LayoutNode","./FlowLayoutNode","./LayoutNodeManager","famous/surfaces/ContainerSurface","famous/core/Transform","famous/core/EventHandler","famous/core/Group","famous/math/Vector","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/inputs/ScrollSync","famous/core/ViewSequence"],function(t,e,i){function o(t){t=D.combineOptions(o.DEFAULT_OPTIONS,t);var e=new E(t.flow?F:C,s.bind(this));I.call(this,t,e),this._scroll={activeTouches:[],pe:new k,particle:new A(this.options.scrollParticle),dragForce:new U(this.options.scrollDrag),frictionForce:new U(this.options.scrollFriction),springValue:void 0,springForce:new H(this.options.scrollSpring),springEndState:new V([0,0,0]),groupStart:0,groupTranslate:[0,0,0],scrollDelta:0,normalizedScrollDelta:0,scrollForce:0,scrollForceCount:0,unnormalizedScrollOffset:0,isScrolling:!1},this._debug={layoutCount:0,commitCount:0},this.group=new q,this.group.add({render:N.bind(this)}),this._scroll.pe.addBody(this._scroll.particle),this.options.scrollDrag.disabled||(this._scroll.dragForceId=this._scroll.pe.attach(this._scroll.dragForce,this._scroll.particle)),this.options.scrollFriction.disabled||(this._scroll.frictionForceId=this._scroll.pe.attach(this._scroll.frictionForce,this._scroll.particle)),this._scroll.springForce.setOptions({anchor:this._scroll.springEndState}),this._eventInput.on("touchstart",u.bind(this)),this._eventInput.on("touchmove",p.bind(this)),this._eventInput.on("touchend",d.bind(this)),this._eventInput.on("touchcancel",d.bind(this)),this._eventInput.on("mousedown",l.bind(this)),this._eventInput.on("mouseup",h.bind(this)),this._eventInput.on("mousemove",c.bind(this)),this._scrollSync=new B(this.options.scrollSync),this._eventInput.pipe(this._scrollSync),this._scrollSync.on("update",f.bind(this)),this.options.useContainer&&(this.container=new L(this.options.container),this.container.add({render:function(){return this.id}.bind(this)}),this.options.autoPipeEvents||(this.subscribe(this.container),P.setInputHandler(this.container,this),P.setOutputHandler(this.container,this)))}function s(t,e){!e&&this.options.flowOptions.insertSpec&&t.setSpec(this.options.flowOptions.insertSpec)}function r(){return!this._layout.capabilities||void 0===this._layout.capabilities.sequentialScrollingOptimized||this._layout.capabilities.sequentialScrollingOptimized}function n(){var t=this._scroll.scrollForceCount?void 0:this._scroll.springPosition;this._scroll.springValue!==t&&(this._scroll.springValue=t,void 0===t?void 0!==this._scroll.springForceId&&(this._scroll.pe.detach(this._scroll.springForceId),this._scroll.springForceId=void 0):(void 0===this._scroll.springForceId&&(this._scroll.springForceId=this._scroll.pe.attach(this._scroll.springForce,this._scroll.particle)),this._scroll.springEndState.set1D(t),this._scroll.pe.wake()))}function a(t){return t.timeStamp||Date.now()}function l(t){if(this.options.mouseMove){this._scroll.mouseMove&&this.releaseScrollForce(this._scroll.mouseMove.delta);var e=[t.clientX,t.clientY],i=a(t);this._scroll.mouseMove={delta:0,start:e,current:e,prev:e,time:i,prevTime:i},this.applyScrollForce(this._scroll.mouseMove.delta)}}function c(t){if(this._scroll.mouseMove&&this.options.enabled){var e=Math.atan2(Math.abs(t.clientY-this._scroll.mouseMove.prev[1]),Math.abs(t.clientX-this._scroll.mouseMove.prev[0]))/(Math.PI/2),i=Math.abs(this._direction-e);(void 0===this.options.touchMoveDirectionThresshold||i<=this.options.touchMoveDirectionThresshold)&&(this._scroll.mouseMove.prev=this._scroll.mouseMove.current,this._scroll.mouseMove.current=[t.clientX,t.clientY],this._scroll.mouseMove.prevTime=this._scroll.mouseMove.time,this._scroll.mouseMove.direction=e,this._scroll.mouseMove.time=a(t));var o=this._scroll.mouseMove.current[this._direction]-this._scroll.mouseMove.start[this._direction];this.updateScrollForce(this._scroll.mouseMove.delta,o),this._scroll.mouseMove.delta=o}}function h(t){if(this._scroll.mouseMove){var e=0,i=this._scroll.mouseMove.time-this._scroll.mouseMove.prevTime;if(i>0&&a(t)-this._scroll.mouseMove.time<=this.options.touchMoveNoVelocityDuration){var o=this._scroll.mouseMove.current[this._direction]-this._scroll.mouseMove.prev[this._direction];e=o/i}this.releaseScrollForce(this._scroll.mouseMove.delta,e),this._scroll.mouseMove=void 0}}function u(t){this._touchEndEventListener||(this._touchEndEventListener=function(t){t.target.removeEventListener("touchend",this._touchEndEventListener),d.call(this,t)}.bind(this));for(var e,i,o=this._scroll.activeTouches.length,s=0;s<this._scroll.activeTouches.length;){var r=this._scroll.activeTouches[s];for(i=!1,e=0;e<t.touches.length;e++){var n=t.touches[e];if(n.identifier===r.id){i=!0;break}}i?s++:this._scroll.activeTouches.splice(s,1)}for(s=0;s<t.touches.length;s++){var l=t.touches[s];for(i=!1,e=0;e<this._scroll.activeTouches.length;e++)if(this._scroll.activeTouches[e].id===l.identifier){i=!0;break}if(!i){var c=[l.clientX,l.clientY],h=a(t);this._scroll.activeTouches.push({id:l.identifier,start:c,current:c,prev:c,time:h,prevTime:h}),l.target.addEventListener("touchend",this._touchEndEventListener)}}!o&&this._scroll.activeTouches.length&&(this.applyScrollForce(0),this._scroll.touchDelta=0)}function p(t){if(this.options.enabled){for(var e,i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=0;s<this._scroll.activeTouches.length;s++){var r=this._scroll.activeTouches[s];if(r.id===o.identifier){var n=Math.atan2(Math.abs(o.clientY-r.prev[1]),Math.abs(o.clientX-r.prev[0]))/(Math.PI/2),l=Math.abs(this._direction-n);(void 0===this.options.touchMoveDirectionThresshold||l<=this.options.touchMoveDirectionThresshold)&&(r.prev=r.current,r.current=[o.clientX,o.clientY],r.prevTime=r.time,r.direction=n,r.time=a(t),e=0===s?r:void 0)}}if(e){var c=e.current[this._direction]-e.start[this._direction];this.updateScrollForce(this._scroll.touchDelta,c),this._scroll.touchDelta=c}}}function d(t){for(var e=this._scroll.activeTouches.length?this._scroll.activeTouches[0]:void 0,i=0;i<t.changedTouches.length;i++)for(var o=t.changedTouches[i],s=0;s<this._scroll.activeTouches.length;s++){var r=this._scroll.activeTouches[s];if(r.id===o.identifier){if(this._scroll.activeTouches.splice(s,1),0===s&&this._scroll.activeTouches.length){var n=this._scroll.activeTouches[0];n.start[0]=n.current[0]-(r.current[0]-r.start[0]),n.start[1]=n.current[1]-(r.current[1]-r.start[1])}break}}if(e&&!this._scroll.activeTouches.length){var l=0,c=e.time-e.prevTime;if(c>0&&a(t)-e.time<=this.options.touchMoveNoVelocityDuration){var h=e.current[this._direction]-e.prev[this._direction];l=h/c}var u=this._scroll.touchDelta;this.releaseScrollForce(u,l),this._scroll.touchDelta=0}}function f(t){if(this.options.enabled){var e=Array.isArray(t.delta)?t.delta[this._direction]:t.delta;this.scroll(e)}}function _(t,e){if(void 0!==t&&(this._scroll.particleValue=t,this._scroll.particle.setPosition1D(t)),void 0!==e){var i=this._scroll.particle.getVelocity1D();i!==e&&this._scroll.particle.setVelocity1D(e)}}function g(t,e){(e||void 0===this._scroll.particleValue)&&(this._scroll.particleValue=this._scroll.particle.getPosition1D(),this._scroll.particleValue=Math.round(1e3*this._scroll.particleValue)/1e3);var i=this._scroll.particleValue;return(this._scroll.scrollDelta||this._scroll.normalizedScrollDelta)&&(i+=this._scroll.scrollDelta+this._scroll.normalizedScrollDelta,(this._scroll.boundsReached&j.PREV&&i>this._scroll.springPosition||this._scroll.boundsReached&j.NEXT&&i<this._scroll.springPosition||this._scroll.boundsReached===j.BOTH)&&(i=this._scroll.springPosition),t&&(this._scroll.scrollDelta||(this._scroll.normalizedScrollDelta=0,_.call(this,i,void 0,"_calcScrollOffset")),this._scroll.normalizedScrollDelta+=this._scroll.scrollDelta,this._scroll.scrollDelta=0)),this._scroll.scrollForceCount&&this._scroll.scrollForce&&(void 0!==this._scroll.springPosition?i=(i+this._scroll.scrollForce+this._scroll.springPosition)/2:i+=this._scroll.scrollForce),this.options.overscroll||(this._scroll.boundsReached===j.BOTH||this._scroll.boundsReached===j.PREV&&i>this._scroll.springPosition||this._scroll.boundsReached===j.NEXT&&i<this._scroll.springPosition)&&(i=this._scroll.springPosition),i}function v(t,e){var i,o=this._calcScrollHeight(!1),s=this._calcScrollHeight(!0),n=r.call(this);if(n&&(void 0!==s&&void 0!==o&&(i=o+s),void 0!==i&&i<=t[this._direction]))return this._scroll.boundsReached=j.BOTH,this._scroll.springPosition=this.options.alignment?-s:o,void(this._scroll.springSource=X.MINSIZE);
if(this.options.alignment)if(n){if(void 0!==s&&0>=e+s)return this._scroll.boundsReached=j.NEXT,this._scroll.springPosition=-s,void(this._scroll.springSource=X.NEXTBOUNDS)}else{var a=this._calcScrollHeight(!1,!0);if(void 0!==s&&a&&e+s+t[this._direction]<=a)return this._scroll.boundsReached=j.NEXT,this._scroll.springPosition=s-(t[this._direction]-a),void(this._scroll.springSource=X.NEXTBOUNDS)}else if(void 0!==o&&e-o>=0)return this._scroll.boundsReached=j.PREV,this._scroll.springPosition=o,void(this._scroll.springSource=X.PREVBOUNDS);if(this.options.alignment){if(void 0!==o&&e-o>=-t[this._direction])return this._scroll.boundsReached=j.PREV,this._scroll.springPosition=-t[this._direction]+o,void(this._scroll.springSource=X.PREVBOUNDS)}else{var l=n?t[this._direction]:this._calcScrollHeight(!0,!0);if(void 0!==s&&l>=e+s)return this._scroll.boundsReached=j.NEXT,this._scroll.springPosition=l-s,void(this._scroll.springSource=X.NEXTBOUNDS)}this._scroll.boundsReached=j.NONE,this._scroll.springPosition=void 0,this._scroll.springSource=X.NONE}function y(t,e){var i=this._scroll.scrollToRenderNode||this._scroll.ensureVisibleRenderNode;if(i&&!(this._scroll.boundsReached===j.BOTH||!this._scroll.scrollToDirection&&this._scroll.boundsReached===j.PREV||this._scroll.scrollToDirection&&this._scroll.boundsReached===j.NEXT)){for(var o,s=0,r=this._nodes.getStartEnumNode(!0),n=0;r&&(n++,r._invalidated&&void 0!==r.scrollLength);){if(this.options.alignment&&(s-=r.scrollLength),r.renderNode===i){o=r;break}this.options.alignment||(s-=r.scrollLength),r=r._next}if(!o)for(s=0,r=this._nodes.getStartEnumNode(!1);r&&r._invalidated&&void 0!==r.scrollLength;){if(this.options.alignment||(s+=r.scrollLength),r.renderNode===i){o=r;break}this.options.alignment&&(s+=r.scrollLength),r=r._prev}if(o)return void(this._scroll.ensureVisibleRenderNode?this.options.alignment?s-o.scrollLength<0?(this._scroll.springPosition=s,this._scroll.springSource=X.ENSUREVISIBLE):s>t[this._direction]?(this._scroll.springPosition=t[this._direction]-s,this._scroll.springSource=X.ENSUREVISIBLE):o.trueSizeRequested||(this._scroll.ensureVisibleRenderNode=void 0):(s=-s,0>s?(this._scroll.springPosition=s,this._scroll.springSource=X.ENSUREVISIBLE):s+o.scrollLength>t[this._direction]?(this._scroll.springPosition=t[this._direction]-(s+o.scrollLength),this._scroll.springSource=X.ENSUREVISIBLE):o.trueSizeRequested||(this._scroll.ensureVisibleRenderNode=void 0)):(this._scroll.springPosition=s,this._scroll.springSource=X.GOTOSEQUENCE));if(this._scroll.scrollToDirection?(this._scroll.springPosition=e-t[this._direction],this._scroll.springSource=X.GOTONEXTDIRECTION):(this._scroll.springPosition=e+t[this._direction],this._scroll.springSource=X.GOTOPREVDIRECTION),this._viewSequence.cleanup)for(var a=this._viewSequence;a.get()!==i&&(a=this._scroll.scrollToDirection?a.getNext(!0):a.getPrevious(!0)););}}function m(){if(this.options.paginated&&!this._scroll.scrollForceCount&&void 0===this._scroll.springPosition){var t;switch(this.options.paginationMode){case Q.SCROLL:(!this.options.paginationEnergyThresshold||Math.abs(this._scroll.particle.getEnergy())<=this.options.paginationEnergyThresshold)&&(t=this.options.alignment?this.getLastVisibleItem():this.getFirstVisibleItem(),t&&t.renderNode&&this.goToRenderNode(t.renderNode));break;case Q.PAGE:t=this.options.alignment?this.getLastVisibleItem():this.getFirstVisibleItem(),t&&t.renderNode&&this.goToRenderNode(t.renderNode)}}}function S(t){for(var e=0,i=t,o=!1,s=this._nodes.getStartEnumNode(!1);s&&s._invalidated&&s._viewSequence&&(o&&(this._viewSequence=s._viewSequence,i=t,o=!1),!(void 0===s.scrollLength||s.trueSizeRequested||0>t));)t-=s.scrollLength,e++,s.scrollLength&&(this.options.alignment?o=t>=0:(this._viewSequence=s._viewSequence,i=t)),s=s._prev;return i}function x(t){for(var e=0,i=t,o=this._nodes.getStartEnumNode(!0);o&&o._invalidated&&void 0!==o.scrollLength&&!o.trueSizeRequested&&o._viewSequence&&(!(t>0)||this.options.alignment&&0===o.scrollLength);)this.options.alignment&&(t+=o.scrollLength,e++),(o.scrollLength||this.options.alignment)&&(this._viewSequence=o._viewSequence,i=t),this.options.alignment||(t+=o.scrollLength,e++),o=o._next;return i}function w(t,e){var i=this._layout.capabilities;if(i&&i.debug&&void 0!==i.debug.normalize&&!i.debug.normalize)return e;if(this._scroll.scrollForceCount)return e;var o=e;if(this.options.alignment&&0>e?o=x.call(this,e):!this.options.alignment&&e>0&&(o=S.call(this,e)),o===e&&(this.options.alignment&&e>0?o=S.call(this,e):!this.options.alignment&&0>e&&(o=x.call(this,e))),o!==e){var s=o-e,n=this._scroll.particle.getPosition1D();_.call(this,n+s,void 0,"normalize"),void 0!==this._scroll.springPosition&&(this._scroll.springPosition+=s),r.call(this)&&(this._scroll.groupStart-=s)}return o}function b(t){for(var e,i={},o=1e7,s=t&&this.options.alignment?-this._contextSizeCache[this._direction]:t||this.options.alignment?0:this._contextSizeCache[this._direction],r=this._scroll.unnormalizedScrollOffset,n=this._nodes.getStartEnumNode(!0);n&&n._invalidated&&void 0!==n.scrollLength;){if(n._viewSequence){if(e=Math.abs(s-(r+(t?0:n.scrollLength))),e>=o)break;o=e,i.scrollOffset=r,i._node=n,r+=n.scrollLength}n=n._next}for(r=this._scroll.unnormalizedScrollOffset,n=this._nodes.getStartEnumNode(!1);n&&n._invalidated&&void 0!==n.scrollLength;){if(n._viewSequence){if(r-=n.scrollLength,e=Math.abs(s-(r+(t?0:n.scrollLength))),e>=o)break;o=e,i.scrollOffset=r,i._node=n}n=n._prev}return i._node?(i.scrollLength=i._node.scrollLength,i.visiblePerc=this.options.alignment?(Math.min(i.scrollOffset+i.scrollLength,0)-Math.max(i.scrollOffset,-this._contextSizeCache[this._direction]))/i.scrollLength:(Math.min(i.scrollOffset+i.scrollLength,this._contextSizeCache[this._direction])-Math.max(i.scrollOffset,0))/i.scrollLength,i.index=i._node._viewSequence.getIndex(),i.viewSequence=i._node._viewSequence,i.renderNode=i._node.renderNode,i):void 0}function z(t,e,i){i?(this._viewSequence=t,this._scroll.springPosition=void 0,n.call(this),this.halt(),this._scroll.scrollDelta=0,_.call(this,0,0,"_goToSequence"),this._isDirty=!0):(this._scroll.scrollToSequence=t,this._scroll.scrollToRenderNode=t.get(),this._scroll.ensureVisibleRenderNode=void 0,this._scroll.scrollToDirection=e,this._scroll.scrollDirty=!0)}function O(t,e){this._scroll.scrollToSequence=void 0,this._scroll.scrollToRenderNode=void 0,this._scroll.ensureVisibleRenderNode=t.get(),this._scroll.scrollToDirection=e,this._scroll.scrollDirty=!0}function T(t,e){var i=(e?void 0:this._scroll.scrollToSequence)||this._viewSequence;if(!this._scroll.scrollToSequence&&!e){var o=this.getFirstVisibleItem();o&&(i=o.viewSequence,(0>t&&o.scrollOffset<0||t>0&&o.scrollOffset>0)&&(t=0))}if(i){for(var s=0;s<Math.abs(t);s++){var r=t>0?i.getNext():i.getPrevious();if(!r)break;i=r}z.call(this,i,t>=0,e)}}function M(t,e,i){this._debug.layoutCount++;var o=0-Math.max(this.options.extraBoundsSpace[0],1),s=t[this._direction]+Math.max(this.options.extraBoundsSpace[1],1);this.options.layoutAll&&(o=-1e6,s=1e6);var r=this._nodes.prepareForLayout(this._viewSequence,this._nodesById,{size:t,direction:this._direction,reverse:this.options.alignment?!0:!1,scrollOffset:this.options.alignment?e+t[this._direction]:e,scrollStart:o,scrollEnd:s});this._layout._function&&this._layout._function(r,this._layout.options),this._scroll.unnormalizedScrollOffset=e,this._postLayout&&this._postLayout(t,e),this._nodes.removeNonInvalidatedNodes(this.options.flowOptions.removeSpec),v.call(this,t,e),y.call(this,t,e),m.call(this);var a=g.call(this,!0);if(!i&&a!==e)return M.call(this,t,a,!0);if(e=w.call(this,t,e),n.call(this),this._nodes.removeVirtualViewSequenceNodes(),this.options.size&&this.options.size[this._direction]===!0){for(var l=0,c=this._nodes.getStartEnumNode();c;)c._invalidated&&c.scrollLength&&(l+=c.scrollLength),c=c._next;this._size=this._size||[0,0],this._size[0]=this.options.size[0],this._size[1]=this.options.size[1],this._size[this._direction]=l}return e}function N(){for(var t=this._specs,e=0,i=t.length;i>e;e++)t[e].renderNode&&(t[e].target=t[e].renderNode.render());return t.length&&t[t.length-1]===this._cleanupRegistration||t.push(this._cleanupRegistration),t}var D=t("./LayoutUtility"),I=t("./LayoutController"),C=t("./LayoutNode"),F=t("./FlowLayoutNode"),E=t("./LayoutNodeManager"),L=t("famous/surfaces/ContainerSurface"),R=t("famous/core/Transform"),P=t("famous/core/EventHandler"),q=t("famous/core/Group"),V=t("famous/math/Vector"),k=t("famous/physics/PhysicsEngine"),A=t("famous/physics/bodies/Particle"),U=t("famous/physics/forces/Drag"),H=t("famous/physics/forces/Spring"),B=t("famous/inputs/ScrollSync"),G=t("famous/core/ViewSequence"),j={NONE:0,PREV:1,NEXT:2,BOTH:3},X={NONE:"none",NEXTBOUNDS:"next-bounds",PREVBOUNDS:"prev-bounds",MINSIZE:"minimal-size",GOTOSEQUENCE:"goto-sequence",ENSUREVISIBLE:"ensure-visible",GOTOPREVDIRECTION:"goto-prev-direction",GOTONEXTDIRECTION:"goto-next-direction"},Q={PAGE:0,SCROLL:1};o.prototype=Object.create(I.prototype),o.prototype.constructor=o,o.Bounds=j,o.PaginationMode=Q,o.DEFAULT_OPTIONS={useContainer:!1,container:{properties:{overflow:"hidden"}},scrollParticle:{},scrollDrag:{forceFunction:U.FORCE_FUNCTIONS.QUADRATIC,strength:.001,disabled:!0},scrollFriction:{forceFunction:U.FORCE_FUNCTIONS.LINEAR,strength:.0025,disabled:!1},scrollSpring:{dampingRatio:1,period:350},scrollSync:{scale:.2},overscroll:!0,paginated:!1,paginationMode:Q.PAGE,paginationEnergyThresshold:.01,alignment:0,touchMoveDirectionThresshold:void 0,touchMoveNoVelocityDuration:100,mouseMove:!1,enabled:!0,layoutAll:!1,alwaysLayout:!1,extraBoundsSpace:[100,100],debug:!1},o.prototype.setOptions=function(t){return I.prototype.setOptions.call(this,t),this._scroll&&(t.scrollSpring&&this._scroll.springForce.setOptions(t.scrollSpring),t.scrollDrag&&this._scroll.dragForce.setOptions(t.scrollDrag)),t.scrollSync&&this._scrollSync&&this._scrollSync.setOptions(t.scrollSync),this},o.prototype._calcScrollHeight=function(t,e){for(var i=0,o=this._nodes.getStartEnumNode(t);o;){if(o._invalidated){if(o.trueSizeRequested){i=void 0;break}if(void 0!==o.scrollLength&&(i=e?o.scrollLength:i+o.scrollLength,!t&&e))break}o=t?o._next:o._prev}return i},o.prototype.getVisibleItems=function(){for(var t=this._contextSizeCache,e=this.options.alignment?this._scroll.unnormalizedScrollOffset+t[this._direction]:this._scroll.unnormalizedScrollOffset,i=[],o=this._nodes.getStartEnumNode(!0);o&&o._invalidated&&void 0!==o.scrollLength&&!(e>t[this._direction]);)e+=o.scrollLength,e>=0&&o._viewSequence&&i.push({index:o._viewSequence.getIndex(),viewSequence:o._viewSequence,renderNode:o.renderNode,visiblePerc:o.scrollLength?(Math.min(e,t[this._direction])-Math.max(e-o.scrollLength,0))/o.scrollLength:1,scrollOffset:e-o.scrollLength,scrollLength:o.scrollLength,_node:o}),o=o._next;for(e=this.options.alignment?this._scroll.unnormalizedScrollOffset+t[this._direction]:this._scroll.unnormalizedScrollOffset,o=this._nodes.getStartEnumNode(!1);o&&o._invalidated&&void 0!==o.scrollLength&&!(0>e);)e-=o.scrollLength,e<t[this._direction]&&o._viewSequence&&i.unshift({index:o._viewSequence.getIndex(),viewSequence:o._viewSequence,renderNode:o.renderNode,visiblePerc:o.scrollLength?(Math.min(e+o.scrollLength,t[this._direction])-Math.max(e,0))/o.scrollLength:1,scrollOffset:e,scrollLength:o.scrollLength,_node:o}),o=o._prev;return i},o.prototype.getFirstVisibleItem=function(){return b.call(this,!0)},o.prototype.getLastVisibleItem=function(){return b.call(this,!1)},o.prototype.goToFirstPage=function(t){if(!this._viewSequence)return this;if(this._viewSequence._&&this._viewSequence._.loop)return D.error("Unable to go to first item of looped ViewSequence"),this;for(var e=this._viewSequence;e;){var i=e.getPrevious();if(!i||!i.get())break;e=i}return z.call(this,e,!1,t),this},o.prototype.goToPreviousPage=function(t){return T.call(this,-1,t),this},o.prototype.goToNextPage=function(t){return T.call(this,1,t),this},o.prototype.goToLastPage=function(t){if(!this._viewSequence)return this;if(this._viewSequence._&&this._viewSequence._.loop)return D.error("Unable to go to last item of looped ViewSequence"),this;for(var e=this._viewSequence;e;){var i=e.getNext();if(!i||!i.get())break;e=i}return z.call(this,e,!0,t),this},o.prototype.goToRenderNode=function(t,e){if(!this._viewSequence||!t)return this;if(this._viewSequence.get()===t){var i=g.call(this)>=0;return z.call(this,this._viewSequence,i,e),this}for(var o=this._viewSequence.getNext(),s=this._viewSequence.getPrevious();(o||s)&&o!==this._viewSequence;){var r=o?o.get():void 0;if(r===t){z.call(this,o,!0,e);break}var n=s?s.get():void 0;if(n===t){z.call(this,s,!1,e);break}o=r?o.getNext():void 0,s=n?s.getPrevious():void 0}return this},o.prototype.ensureVisible=function(t){if(t instanceof G)t=t.get();else if(t instanceof Number||"number"==typeof t){for(var e=this._viewSequence;e.getIndex()<t;)if(e=e.getNext(),!e)return this;for(;e.getIndex()>t;)if(e=e.getPrevious(),!e)return this}if(this._viewSequence.get()===t){var i=g.call(this)>=0;return O.call(this,this._viewSequence,i),this}for(var o=this._viewSequence.getNext(),s=this._viewSequence.getPrevious();(o||s)&&o!==this._viewSequence;){var r=o?o.get():void 0;if(r===t){O.call(this,o,!0);break}var n=s?s.get():void 0;if(n===t){O.call(this,s,!1);break}o=r?o.getNext():void 0,s=n?s.getPrevious():void 0}return this},o.prototype.scroll=function(t){return this.halt(),this._scroll.scrollDelta+=t,this},o.prototype.canScroll=function(t){var e,i=g.call(this),o=this._calcScrollHeight(!1),s=this._calcScrollHeight(!0);if(void 0!==s&&void 0!==o&&(e=o+s),void 0!==e&&e<=this._contextSizeCache[this._direction])return 0;if(0>t&&void 0!==s){var r=this._contextSizeCache[this._direction]-(i+s);return Math.max(r,t)}if(t>0&&void 0!==o){var n=-(i-o);return Math.min(n,t)}return t},o.prototype.halt=function(){return this._scroll.scrollToSequence=void 0,this._scroll.scrollToRenderNode=void 0,this._scroll.ensureVisibleRenderNode=void 0,_.call(this,void 0,0,"halt"),this},o.prototype.isScrolling=function(){return this._scroll.isScrolling},o.prototype.getBoundsReached=function(){return this._scroll.boundsReached},o.prototype.getVelocity=function(){return this._scroll.particle.getVelocity1D()},o.prototype.getEnergy=function(){return this._scroll.particle.getEnergy()},o.prototype.setVelocity=function(t){return this._scroll.particle.setVelocity1D(t)},o.prototype.applyScrollForce=function(t){return this.halt(),0===this._scroll.scrollForceCount&&(this._scroll.scrollForceStartItem=this.options.alignment?this.getLastVisibleItem():this.getFirstVisibleItem()),this._scroll.scrollForceCount++,this._scroll.scrollForce+=t,this._eventOutput.emit(1===this._scroll.scrollForceCount?"swipestart":"swipeupdate",{target:this,total:this._scroll.scrollForce,delta:t}),this},o.prototype.updateScrollForce=function(t,e){return this.halt(),e-=t,this._scroll.scrollForce+=e,this._eventOutput.emit("swipeupdate",{target:this,total:this._scroll.scrollForce,delta:e}),this},o.prototype.releaseScrollForce=function(t,e){if(this.halt(),1===this._scroll.scrollForceCount){var i=g.call(this);if(_.call(this,i,e,"releaseScrollForce"),this._scroll.pe.wake(),this._scroll.scrollForce=0,this._scroll.scrollDirty=!0,this._scroll.scrollForceStartItem&&this.options.paginated&&this.options.paginationMode===Q.PAGE){var o=this.options.alignment?this.getLastVisibleItem(!0):this.getFirstVisibleItem(!0);o&&(o.renderNode!==this._scroll.scrollForceStartItem.renderNode?this.goToRenderNode(o.renderNode):this.options.paginationEnergyThresshold&&Math.abs(this._scroll.particle.getEnergy())>=this.options.paginationEnergyThresshold?(e=e||0,0>e&&o._node._next&&o._node._next.renderNode?this.goToRenderNode(o._node._next.renderNode):e>=0&&o._node._prev&&o._node._prev.renderNode&&this.goToRenderNode(o._node._prev.renderNode)):this.goToRenderNode(o.renderNode))}this._scroll.scrollForceStartItem=void 0,this._scroll.scrollForceCount--,this._eventOutput.emit("swipeend",{target:this,total:t,delta:0,velocity:e})}else this._scroll.scrollForce-=t,this._scroll.scrollForceCount--,this._eventOutput.emit("swipeupdate",{target:this,total:this._scroll.scrollForce,delta:t});return this},o.prototype.getSpec=function(){var t=I.prototype.getSpec.apply(this,arguments);if(t&&r.call(this)){t={origin:t.origin,align:t.align,opacity:t.opacity,size:t.size,renderNode:t.renderNode,transform:t.transform};var e=[0,0,0];e[this._direction]=this._scrollOffsetCache+this._scroll.groupStart,t.transform=R.thenMove(t.transform,e)}return t},o.prototype.commit=function(t){var e=t.size;this._debug.commitCount++,this._resetFlowState&&(this._resetFlowState=!1,this._isDirty=!0,this._nodes.removeAll());var i=g.call(this,!0,!0);void 0===this._scrollOffsetCache&&(this._scrollOffsetCache=i);var o,s=!1,n=!1;if(e[0]!==this._contextSizeCache[0]||e[1]!==this._contextSizeCache[1]||this._isDirty||this._scroll.scrollDirty||this._nodes._trueSizeRequested||this.options.alwaysLayout||this._scrollOffsetCache!==i){if(o={target:this,oldSize:this._contextSizeCache,size:e,oldScrollOffset:-(this._scrollOffsetCache+this._scroll.groupStart),scrollOffset:-(i+this._scroll.groupStart)},this._scrollOffsetCache!==i?(this._scroll.isScrolling||(this._scroll.isScrolling=!0,this._eventOutput.emit("scrollstart",o)),n=!0):this._scroll.isScrolling&&!this._scroll.scrollForceCount&&(s=!0),this._eventOutput.emit("layoutstart",o),this.options.flow&&(this._isDirty||this.options.flowOptions.reflowOnResize&&(e[0]!==this._contextSizeCache[0]||e[1]!==this._contextSizeCache[1])))for(var a=this._nodes.getStartEnumNode();a;)a.releaseLock(!0),a=a._next;this._contextSizeCache[0]=e[0],this._contextSizeCache[1]=e[1],this._isDirty=!1,this._scroll.scrollDirty=!1,i=M.call(this,e,i),this._scrollOffsetCache=i,o.scrollOffset=-(this._scrollOffsetCache+this._scroll.groupStart)}else this._scroll.isScrolling&&!this._scroll.scrollForceCount&&(s=!0);var l=this._scroll.groupTranslate;l[0]=0,l[1]=0,l[2]=0,l[this._direction]=-this._scroll.groupStart-i;var c=r.call(this),h=this._nodes.buildSpecAndDestroyUnrenderedNodes(c?l:void 0);if(this._specs=h.specs,this._specs.length||(this._scroll.groupStart=0),o&&this._eventOutput.emit("layoutend",o),h.modified&&this._eventOutput.emit("reflow",{target:this}),n&&this._eventOutput.emit("scroll",o),o){var u=this.options.alignment?this.getLastVisibleItem():this.getFirstVisibleItem();(u&&!this._visibleItemCache||!u&&this._visibleItemCache||u&&this._visibleItemCache&&u.renderNode!==this._visibleItemCache.renderNode)&&(this._eventOutput.emit("pagechange",{target:this,oldViewSequence:this._visibleItemCache?this._visibleItemCache.viewSequence:void 0,viewSequence:u?u.viewSequence:void 0,oldIndex:this._visibleItemCache?this._visibleItemCache.index:void 0,index:u?u.index:void 0,renderNode:u?u.renderNode:void 0,oldRenderNode:this._visibleItemCache?this._visibleItemCache.renderNode:void 0}),this._visibleItemCache=u)}s&&(this._scroll.isScrolling=!1,o={target:this,oldSize:e,size:e,oldScrollOffset:-(this._scroll.groupStart+i),scrollOffset:-(this._scroll.groupStart+i)},this._eventOutput.emit("scrollend",o));var p=t.transform;if(c){var d=i+this._scroll.groupStart,f=[0,0,0];f[this._direction]=d,p=R.thenMove(p,f)}return{transform:p,size:e,opacity:t.opacity,origin:t.origin,target:this.group.render()}},o.prototype.render=function(){return this.container?this.container.render.apply(this.container,arguments):this.id},i.exports=o}),i("famous-flex/layouts/ListLayout",["require","exports","module","famous/utilities/Utility","../LayoutUtility"],function(t,e,i){function o(t,e){var i,o,s,n,c,h,u,p,d,f,_,g,v,y,m=t.size,S=t.direction,x=t.alignment,w=S?0:1,b=r.normalizeMargins(e.margins),z=e.spacing||0,O=e.isSectionCallback;for(a.size[0]=m[0],a.size[1]=m[1],a.size[w]-=b[1-w]+b[3-w],a.translate[0]=0,a.translate[1]=0,a.translate[2]=0,a.translate[w]=b[S?3:0],e.itemSize!==!0&&e.hasOwnProperty("itemSize")?e.itemSize instanceof Function?c=e.itemSize:n=void 0===e.itemSize?m[S]:e.itemSize:n=!0,l[0]=b[S?0:3],l[1]=-b[S?2:1],i=t.scrollOffset+l[x],y=t.scrollEnd+l[x];y+z>i&&(g=o,o=t.next());)s=c?c(o.renderNode):n,s=s===!0?t.resolveSize(o,m)[S]:s,a.size[S]=s,a.translate[S]=i+(x?z:0),a.scrollLength=s+z,t.set(o,a),i+=a.scrollLength,O&&O(o.renderNode)?(a.translate[S]<=l[0]&&!f&&(f=!0,a.translate[S]=l[0],t.set(o,a)),_?void 0===v&&(v=i-s):(h=o,u=i-s,p=s,d=s)):!_&&i>=0&&(_=o);for(!g||o||x||(a.scrollLength=s+l[0]+-l[1],t.set(g,a)),g=void 0,o=void 0,i=t.scrollOffset+l[x],y=t.scrollStart+l[x];i>y-z&&(g=o,o=t.prev());)s=c?c(o.renderNode):n,s=s===!0?t.resolveSize(o,m)[S]:s,a.scrollLength=s+z,i-=a.scrollLength,a.size[S]=s,a.translate[S]=i+(x?z:0),t.set(o,a),O&&O(o.renderNode)?(a.translate[S]<=l[0]&&!f&&(f=!0,a.translate[S]=l[0],t.set(o,a)),h||(h=o,u=i,p=s,d=a.scrollLength)):i+s>=0&&(_=o,h&&(v=i+s),h=void 0);if(g&&!o&&x&&(a.scrollLength=s+l[0]+-l[1],t.set(g,a),h===g&&(d=a.scrollLength)),O&&!h)for(o=t.prev();o;){if(O(o.renderNode)){h=o,s=e.itemSize||t.resolveSize(o,m)[S],u=i-s,p=s,d=void 0;break}o=t.prev()}if(h){var T=Math.max(l[0],u);void 0!==v&&p>v-l[0]&&(T=v-p),a.size[S]=p,a.translate[S]=T,a.scrollLength=d,t.set(h,a)}}var s=t("famous/utilities/Utility"),r=t("../LayoutUtility"),n={sequence:!0,direction:[s.Direction.Y,s.Direction.X],scrolling:!0,trueSize:!0,sequentialScrollingOptimized:!0},a={size:[0,0],translate:[0,0,0],scrollLength:void 0},l=[0,0];o.Capabilities=n,o.Name="ListLayout",o.Description="List-layout with margins, spacing and sticky headers",i.exports=o}),i("famous-flex/FlexScrollView",["require","exports","module","./LayoutUtility","./ScrollController","./layouts/ListLayout"],function(t,e,i){function o(t){a.call(this,n.combineOptions(o.DEFAULT_OPTIONS,t)),this._thisScrollViewDelta=0,this._leadingScrollViewDelta=0,this._trailingScrollViewDelta=0}function s(t,e){t.state!==e&&(t.state=e,t.node&&t.node.setPullToRefreshStatus&&t.node.setPullToRefreshStatus(e))}function r(t){return this._pullToRefresh?this._pullToRefresh[t?1:0]:void 0}var n=t("./LayoutUtility"),a=t("./ScrollController"),l=t("./layouts/ListLayout"),c={HIDDEN:0,PULLING:1,ACTIVE:2,COMPLETED:3,HIDDING:4};o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.PullToRefreshState=c,o.Bounds=a.Bounds,o.PaginationMode=a.PaginationMode,o.DEFAULT_OPTIONS={layout:l,direction:void 0,paginated:!1,alignment:0,flow:!1,mouseMove:!1,useContainer:!1,visibleItemThresshold:.5,pullToRefreshHeader:void 0,pullToRefreshFooter:void 0,leadingScrollView:void 0,trailingScrollView:void 0},o.prototype.setOptions=function(t){return a.prototype.setOptions.call(this,t),(t.pullToRefreshHeader||t.pullToRefreshFooter||this._pullToRefresh)&&(t.pullToRefreshHeader?(this._pullToRefresh=this._pullToRefresh||[void 0,void 0],this._pullToRefresh[0]||(this._pullToRefresh[0]={state:c.HIDDEN,prevState:c.HIDDEN,footer:!1}),this._pullToRefresh[0].node=t.pullToRefreshHeader):!this.options.pullToRefreshHeader&&this._pullToRefresh&&(this._pullToRefresh[0]=void 0),t.pullToRefreshFooter?(this._pullToRefresh=this._pullToRefresh||[void 0,void 0],this._pullToRefresh[1]||(this._pullToRefresh[1]={state:c.HIDDEN,prevState:c.HIDDEN,footer:!0}),this._pullToRefresh[1].node=t.pullToRefreshFooter):!this.options.pullToRefreshFooter&&this._pullToRefresh&&(this._pullToRefresh[1]=void 0),!this._pullToRefresh||this._pullToRefresh[0]||this._pullToRefresh[1]||(this._pullToRefresh=void 0)),this},o.prototype.sequenceFrom=function(t){return this.setDataSource(t)},o.prototype.getCurrentIndex=function(){var t=this.getFirstVisibleItem();return t?t.viewSequence.getIndex():-1},o.prototype.goToPage=function(t,e){var i=this._viewSequence;if(!i)return this;for(;i.getIndex()<t;)if(i=i.getNext(),!i)return this;for(;i.getIndex()>t;)if(i=i.getPrevious(),!i)return this;return this.goToRenderNode(i.get(),e),this},o.prototype.getOffset=function(){return this._scrollOffsetCache},o.prototype.getPosition=o.prototype.getOffset,o.prototype.getAbsolutePosition=function(){return-(this._scrollOffsetCache+this._scroll.groupStart)},o.prototype._postLayout=function(t,e){if(this._pullToRefresh){this.options.alignment&&(e+=t[this._direction]);for(var i,o,r,n=0;2>n;n++){var a=this._pullToRefresh[n];if(a){var l,h=a.node.getSize()[this._direction],u=a.node.getPullToRefreshSize?a.node.getPullToRefreshSize()[this._direction]:h;a.footer?(o=void 0===o?o=this._calcScrollHeight(!0):o,o=void 0===o?-1:o,l=o>=0?e+o:t[this._direction]+1,this.options.alignment||(i=void 0===i?this._calcScrollHeight(!1):i,i=void 0===i?-1:i,r=i>=0&&o>=0?i+o:-1,r>=0&&r<t[this._direction]&&(l=Math.round(e-i+t[this._direction]))),l=-(l-t[this._direction])):(i=this._calcScrollHeight(!1),i=void 0===i?-1:i,l=i>=0?e-i:i,this.options.alignment&&(o=this._calcScrollHeight(!0),o=void 0===o?-1:o,r=i>=0&&o>=0?i+o:-1,r>=0&&r<t[this._direction]&&(l=Math.round(e-t[this._direction]+o))));var p=Math.max(Math.min(l/u,1),0);switch(a.state){case c.HIDDEN:this._scroll.scrollForceCount&&(p>=1?s(a,c.ACTIVE):l>=.2&&s(a,c.PULLING));break;case c.PULLING:this._scroll.scrollForceCount&&p>=1?s(a,c.ACTIVE):.2>l&&s(a,c.HIDDEN);break;case c.ACTIVE:break;case c.COMPLETED:this._scroll.scrollForceCount||(l>=.2?s(a,c.HIDDING):s(a,c.HIDDEN));break;case c.HIDDING:.2>l&&s(a,c.HIDDEN)}if(a.state!==c.HIDDEN){var d,f={renderNode:a.node,prev:!a.footer,next:a.footer,index:a.footer?++this._nodes._contextState.nextGetIndex:--this._nodes._contextState.prevGetIndex};a.state===c.ACTIVE?d=h:this._scroll.scrollForceCount&&(d=Math.min(l,h));var _={size:[t[0],t[1]],translate:[0,0,-.001],scrollLength:d};_.size[this._direction]=Math.max(Math.min(l,u),0),_.translate[this._direction]=a.footer?t[this._direction]-h:0,this._nodes._context.set(f,_)}}}}},o.prototype.showPullToRefresh=function(t){var e=r.call(this,t);e&&(s(e,c.ACTIVE),this._scroll.scrollDirty=!0)},o.prototype.hidePullToRefresh=function(t){var e=r.call(this,t);return e&&e.state===c.ACTIVE&&(s(e,c.COMPLETED),this._scroll.scrollDirty=!0),this},o.prototype.isPullToRefreshVisible=function(t){var e=r.call(this,t);return e?e.state===c.ACTIVE:!1},o.prototype.applyScrollForce=function(t){var e=this.options.leadingScrollView,i=this.options.trailingScrollView;if(!e&&!i)return a.prototype.applyScrollForce.call(this,t);var o;return 0>t?(e&&(o=e.canScroll(t),this._leadingScrollViewDelta+=o,e.applyScrollForce(o),t-=o),i?(o=this.canScroll(t),a.prototype.applyScrollForce.call(this,o),this._thisScrollViewDelta+=o,t-=o,i.applyScrollForce(t),this._trailingScrollViewDelta+=t):(a.prototype.applyScrollForce.call(this,t),this._thisScrollViewDelta+=t)):(i&&(o=i.canScroll(t),i.applyScrollForce(o),this._trailingScrollViewDelta+=o,t-=o),e?(o=this.canScroll(t),a.prototype.applyScrollForce.call(this,o),this._thisScrollViewDelta+=o,t-=o,e.applyScrollForce(t),this._leadingScrollViewDelta+=t):(a.prototype.applyScrollForce.call(this,t),this._thisScrollViewDelta+=t)),this},o.prototype.updateScrollForce=function(t,e){var i=this.options.leadingScrollView,o=this.options.trailingScrollView;if(!i&&!o)return a.prototype.updateScrollForce.call(this,t,e);var s,r=e-t;return 0>r?(i&&(s=i.canScroll(r),i.updateScrollForce(this._leadingScrollViewDelta,this._leadingScrollViewDelta+s),this._leadingScrollViewDelta+=s,r-=s),o&&r?(s=this.canScroll(r),a.prototype.updateScrollForce.call(this,this._thisScrollViewDelta,this._thisScrollViewDelta+s),this._thisScrollViewDelta+=s,r-=s,this._trailingScrollViewDelta+=r,o.updateScrollForce(this._trailingScrollViewDelta,this._trailingScrollViewDelta+r)):r&&(a.prototype.updateScrollForce.call(this,this._thisScrollViewDelta,this._thisScrollViewDelta+r),this._thisScrollViewDelta+=r)):(o&&(s=o.canScroll(r),o.updateScrollForce(this._trailingScrollViewDelta,this._trailingScrollViewDelta+s),this._trailingScrollViewDelta+=s,r-=s),i?(s=this.canScroll(r),a.prototype.updateScrollForce.call(this,this._thisScrollViewDelta,this._thisScrollViewDelta+s),this._thisScrollViewDelta+=s,r-=s,i.updateScrollForce(this._leadingScrollViewDelta,this._leadingScrollViewDelta+r),this._leadingScrollViewDelta+=r):(a.prototype.updateScrollForce.call(this,this._thisScrollViewDelta,this._thisScrollViewDelta+r),this._thisScrollViewDelta+=r)),this},o.prototype.releaseScrollForce=function(t,e){var i=this.options.leadingScrollView,o=this.options.trailingScrollView;if(!i&&!o)return a.prototype.releaseScrollForce.call(this,t,e);var s;return 0>t?(i&&(s=Math.max(this._leadingScrollViewDelta,t),this._leadingScrollViewDelta-=s,t-=s,i.releaseScrollForce(this._leadingScrollViewDelta,t?0:e)),o?(s=Math.max(this._thisScrollViewDelta,t),this._thisScrollViewDelta-=s,t-=s,a.prototype.releaseScrollForce.call(this,this._thisScrollViewDelta,t?0:e),this._trailingScrollViewDelta-=t,o.releaseScrollForce(this._trailingScrollViewDelta,t?e:0)):(this._thisScrollViewDelta-=t,a.prototype.releaseScrollForce.call(this,this._thisScrollViewDelta,t?e:0))):(o&&(s=Math.min(this._trailingScrollViewDelta,t),this._trailingScrollViewDelta-=s,t-=s,o.releaseScrollForce(this._trailingScrollViewDelta,t?0:e)),i?(s=Math.min(this._thisScrollViewDelta,t),this._thisScrollViewDelta-=s,t-=s,a.prototype.releaseScrollForce.call(this,this._thisScrollViewDelta,t?0:e),this._leadingScrollViewDelta-=t,i.releaseScrollForce(this._leadingScrollViewDelta,t?e:0)):(this._thisScrollViewDelta-=t,a.prototype.updateScrollForce.call(this,this._thisScrollViewDelta,t?e:0))),this},o.prototype.commit=function(t){var e=a.prototype.commit.call(this,t);if(this._pullToRefresh)for(var i=0;2>i;i++){var o=this._pullToRefresh[i];o&&(o.state===c.ACTIVE&&o.prevState!==c.ACTIVE&&this._eventOutput.emit("refresh",{target:this,footer:o.footer}),o.prevState=o.state)}return e},i.exports=o}),i("famous-flex/layouts/CollectionLayout",["require","exports","module","famous/utilities/Utility","../LayoutUtility"],function(t,e,i){function o(t,e){if(!y.length)return 0;var i,o,s=[0,0];for(i=0;i<y.length;i++)s[l]=Math.max(s[l],y[i].size[l]),s[h]+=(i>0?f[h]:0)+y[i].size[h];var r,a=_[h]?(u-s[h])/(2*y.length):0,g=(l?d[3]:d[0])+a;for(i=0;i<y.length;i++){o=y[i];var v=[0,0,0];v[h]=g,v[l]=t?p:p-s[l],r=0,0===i&&(r=s[l],r+=e&&(t&&!c||!t&&c)?l?d[0]+d[2]:d[3]+d[1]:f[l]),o.set={size:o.size,translate:v,scrollLength:r},g+=o.size[h]+f[h]+2*a}for(i=0;i<y.length;i++)o=t?y[i]:y[y.length-1-i],n.set(o.node,o.set);return y=[],s[l]+f[l]}function s(t){var e=g;if(v&&(e=v(t.renderNode,a)),e[0]===!0||e[1]===!0){var i=n.resolveSize(t,a);return e[0]!==!0&&(i[0]=g[0]),e[1]!==!0&&(i[1]=g[1]),i}return e}function r(t,e){if(n=t,a=n.size,l=n.direction,c=n.alignment,h=(l+1)%2,void 0!==e.gutter&&console.warn&&!e.suppressWarnings&&console.warn("option `gutter` has been deprecated for CollectionLayout, use margins & spacing instead"),!e.gutter||e.margins||e.spacing)d=S.normalizeMargins(e.margins),f=e.spacing||0,f=Array.isArray(f)?f:[f,f];else{var i=Array.isArray(e.gutter)?e.gutter:[e.gutter,e.gutter];d=[i[1],i[0],i[1],i[0]],f=i}w[0]=d[l?0:3],w[1]=-d[l?2:1],_=Array.isArray(e.justify)?e.justify:e.justify?[!0,!0]:[!1,!1],u=a[h]-(l?d[3]+d[1]:d[0]+d[2]);var r,m,x,b;for(e.cells?(e.itemSize&&console.warn&&!e.suppressWarnings&&console.warn("options `cells` and `itemSize` cannot both be specified for CollectionLayout, only use one of the two"),g=[(a[0]-(d[1]+d[3]+f[0]*(e.cells[0]-1)))/e.cells[0],(a[1]-(d[0]+d[2]+f[1]*(e.cells[1]-1)))/e.cells[1]]):e.itemSize?e.itemSize instanceof Function?v=e.itemSize:g=void 0===e.itemSize[0]||void 0===e.itemSize[0]?[void 0===e.itemSize[0]?a[0]:e.itemSize[0],void 0===e.itemSize[1]?a[1]:e.itemSize[1]]:e.itemSize:g=[!0,!0],p=n.scrollOffset+(c?0:w[c]),b=n.scrollEnd+(c?0:w[c]),x=0,y=[];b>p;){if(r=n.next(),!r){o(!0,!0);break}m=s(r),x+=(y.length?f[h]:0)+m[h],x>u&&(p+=o(!0,!r),x=m[h]),y.push({node:r,size:m})}for(p=n.scrollOffset+(c?w[c]:0),b=n.scrollStart+(c?w[c]:0),x=0,y=[];p>b;){if(r=n.prev(),!r){o(!1,!0);break}m=s(r),x+=(y.length?f[h]:0)+m[h],x>u&&(p-=o(!1,!r),x=m[h]),y.unshift({node:r,size:m})}}var n,a,l,c,h,u,p,d,f,_,g,v,y,m=t("famous/utilities/Utility"),S=t("../LayoutUtility"),x={sequence:!0,direction:[m.Direction.Y,m.Direction.X],scrolling:!0,trueSize:!0,sequentialScrollingOptimized:!0},w=[0,0];r.Capabilities=x,r.Name="CollectionLayout",r.Description="Multi-cell collection-layout with margins & spacing",i.exports=r
}),i("view/HomeView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous-flex/FlexScrollView","famous-flex/layouts/CollectionLayout"],function(t,e,i){"use strict";function o(){a.apply(this,arguments),this._eventInput.on("deployed",function(){console.log("deployed")}),n.call(this),s.call(this),r.call(this)}function s(){this.title=new l({content:"Web developer",classes:[],properties:{color:"white",textAlign:"center",fontSize:"3em",backgroundColor:"#FA5C4F"}}),this.title.state=new c({proportions:[void 0,.2],align:[0,0],origin:[0,0],transform:h.translate(0,0,0)}),this.add(this.title.state).add(this.title)}function r(){this.body=new l({size:[!0,!0],content:"Web Lorem ipsum dolor sit amet, consectetur adipisicing elit. A quia quos deleniti voluptates fuga mollitia eius, enim ullam, ratione repudiandae.",classes:[],properties:{color:"white",textAlign:"center",fontSize:"2em",backgroundColor:"#FA5C4F"}}),this.body.state=new c({proportions:[void 0,.2],align:[0,0],origin:[0,0],transform:h.translate(0,200,0)}),this.add(this.body.state).add(this.body)}function n(){var t=new u({layout:p,direction:0,useContainer:!0,container:{properties:{overflow:"hidden"}},layoutOptions:{cells:[3,1],margins:[10,5,10,5],spacing:[10,10]},dataSource:[new l({content:"item 1",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 2",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 3",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 3",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 3",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 3",properties:{backgroundColor:"#00FF80"}}),new l({content:"item 3",properties:{backgroundColor:"#00FF80"}})]});t.state=new c({proportions:[void 0,.5],align:[1,1],origin:[1,1],transform:h.translate(0,0,0)}),this.add(t.state).add(t)}var a=t("famous/core/View"),l=t("famous/core/Surface"),c=t("famous/core/Modifier"),h=t("famous/core/Transform"),u=t("famous-flex/FlexScrollView"),p=t("famous-flex/layouts/CollectionLayout");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},i.exports=o}),i("view/AppView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/RenderNode","famous/views/RenderController","famous/utilities/Timer","famous/transitions/Transitionable","famous/transitions/Easing","famous-bkimagesurface","view/HomeView"],function(t,e,i){"use strict";function o(){c.apply(this,arguments),s.call(this),n.call(this),a.call(this),r.call(this),this.nodes=[];for(var t,e=0;e<m.length;e++){t=l.call(this,m[e],e);var i=this.add(t.state).add(t);this.nodes.push(i)}}function s(){var t=new v({content:"/content/images/bg.jpg",sizeMode:v.SizeMode.ASPECTFILL});this.add(t)}function r(){this.renderController=new d,this.renderController.state=new u({size:[window.innerWidth,window.innerHeight-100],align:[.5,1],origin:[.5,1],transform:p.translate(0,0,0)}),this.surfaces=[];var t=new y;this.surfaces.push(t),this._eventInput.on("goster",function(){this.renderController.show(this.surfaces[0]),this.surfaces[0].trigger("deployed")}.bind(this)),this.add(this.renderController.state).add(this.renderController)}function n(){this.image=new v({content:this.options.image,sizeMode:v.SizeMode.ASPECTFILL}),this.image.talign=new _([.5,.5]),this.image.torigin=new _([.5,.5]),this.image.topacity=new _(1),this.image.ttransform=new _(p.translate(0,0,0)),this.image.state=new u({size:[80,80],align:this.image.talign,origin:this.image.torigin,opacity:this.image.topacity,transform:this.image.ttransform}),this.add(this.image.state).add(this.image)}function a(){this.name=new h({size:[!0,!0],content:this.options.name,classes:[],properties:{color:"white",fontSize:"1.5em",textAlign:"center"}}),this.name.talign=new _([.5,.5]),this.name.torigin=new _([.5,.5]),this.name.topacity=new _(1),this.name.ttransform=new _(p.translate(0,60,0)),this.name.state=new u({align:this.name.talign,origin:this.name.torigin,opacity:this.name.topacity,transform:this.name.ttransform}),this.add(this.name.state).add(this.name)}function l(t,e){var i=new h({content:t.title+e,classes:[],properties:{color:"white",textAlign:"center",backgroundColor:"#FA5C4F"}}),o=m.length/2,s=o>e?-100:100,r=o>e?e:e-Math.floor(o);i.tsize=new _([60,60]),i.torigin=new _([.5,1]),i.talign=new _([.5,1]),i.topacity=new _(1),i.ttransform=new _(p.translate(r*s,-100)),i.state=new u({size:i.tsize,align:i.talign,origin:i.torigin,opacity:i.topacity,transform:i.ttransform});var n=this,a={duration:600,curve:g.inOutQuint};return i.on("click",function(){i.tsize.set([40,40],a,function(){function t(){f.setTimeout(function(){var i=e[o];r=0==o?-20:-70*o-20,i.topacity.set(1,a),i.ttransform.set(p.translate(r,20),a),o--,o>=0&&t()},50*o)}i.ttransform.set(p.translate(0,0),a),i.tsize.set([window.innerWidth,window.innerHeight-100],a,function(){}),n.name.ttransform.set(p.translate(100,30),a),n.name.topacity.set(1,a),n.image.ttransform.set(p.translate(10,10),a),n.image.topacity.set(1,a);for(var e=[],o=0;o<n.nodes.length;o++){var s=n.nodes[o]._object;60===s.tsize.get()[0]?e.push(s):f.setTimeout(function(){n._eventInput.trigger("goster",o)},600)}var o=e.length-1;t()}),n.name.talign.set([0,0]),n.name.torigin.set([0,0]),n.name.topacity.set(0),n.name.ttransform.set(p.translate(200,30)),n.image.talign.set([0,0]),n.image.torigin.set([0,0]),n.image.topacity.set(0),n.image.ttransform.set(p.translate(110,10)),f.setTimeout(function(){for(var t,e,i=!1,o=0;o<n.nodes.length;o++)if(t=n.nodes[o]._object,60===t.tsize.get()[0]){var s=i===!0?o-1:o;t.setContent(s),e=0==s?0:-70*s,console.log(e),t.talign.set([1,0]),t.torigin.set([1,0]),t.topacity.set(0),t.ttransform.set(p.translate(e,20))}else i=!0},0)}),i}var c=t("famous/core/View"),h=t("famous/core/Surface"),u=t("famous/core/Modifier"),p=t("famous/core/Transform"),d=(t("famous/core/RenderNode"),t("famous/views/RenderController")),f=t("famous/utilities/Timer"),_=t("famous/transitions/Transitionable"),g=t("famous/transitions/Easing"),v=t("famous-bkimagesurface"),y=t("view/HomeView"),m=[{title:"Home",icon:"home"},{title:"About",icon:"about"},{title:"Page",icon:"about"},{title:"Famous",icon:"about"},{title:"Shuut",icon:"about"}];o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={image:"/content/images/user.jpg",name:"Mervas Dayi"},i.exports=o}),i("main",["require","exports","module","famous/core/Engine","famous/core/Modifier","famous/core/Transform","famous/surfaces/ImageSurface","view/AppView"],function(t){"use strict";var e=t("famous/core/Engine"),i=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/surfaces/ImageSurface"),t("view/AppView")),o=e.createContext();o.setPerspective(1e3);var s=new i({});o.add(s)}),e(["main"])}();